<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>bundle-exec - bundler-1.6.3 Documentation</title>

<link href="../../../fonts.css" rel="stylesheet">
<link href="../../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
</script>

<script src="../../../js/jquery.js"></script>
<script src="../../../js/navigation.js"></script>
<script src="../../../js/search_index.js"></script>
<script src="../../../js/search.js"></script>
<script src="../../../js/searcher.js"></script>
<script src="../../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../lib/bundler/man/bundle.html">bundle</a>
  
    <li><a href="../../../lib/bundler/man/bundle-config.html">bundle-config</a>
  
    <li><a href="../../../lib/bundler/man/bundle-config_txt.html">bundle-config</a>
  
    <li><a href="../../../lib/bundler/man/bundle-exec.html">bundle-exec</a>
  
    <li><a href="../../../lib/bundler/man/bundle-exec_txt.html">bundle-exec</a>
  
    <li><a href="../../../lib/bundler/man/bundle-install.html">bundle-install</a>
  
    <li><a href="../../../lib/bundler/man/bundle-install_txt.html">bundle-install</a>
  
    <li><a href="../../../lib/bundler/man/bundle-package.html">bundle-package</a>
  
    <li><a href="../../../lib/bundler/man/bundle-package_txt.html">bundle-package</a>
  
    <li><a href="../../../lib/bundler/man/bundle-platform.html">bundle-platform</a>
  
    <li><a href="../../../lib/bundler/man/bundle-platform_txt.html">bundle-platform</a>
  
    <li><a href="../../../lib/bundler/man/bundle-update.html">bundle-update</a>
  
    <li><a href="../../../lib/bundler/man/bundle-update_txt.html">bundle-update</a>
  
    <li><a href="../../../lib/bundler/man/bundle_txt.html">bundle</a>
  
    <li><a href="../../../lib/bundler/man/gemfile_5.html">gemfile.5</a>
  
    <li><a href="../../../lib/bundler/man/gemfile_5_txt.html">gemfile.5</a>
  
    <li><a href="../../../lib/bundler/templates/Executable.html">Executable</a>
  
    <li><a href="../../../lib/bundler/templates/Executable_standalone.html">Executable.standalone</a>
  
    <li><a href="../../../lib/bundler/templates/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/Gemfile_tt.html">Gemfile.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/LICENSE_txt_tt.html">LICENSE.txt.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/README_md_tt.html">README.md.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/Rakefile_tt.html">Rakefile.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/bin/newgem_tt.html">newgem.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/ext/newgem/extconf_rb_tt.html">extconf.rb.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/ext/newgem/newgem_c_tt.html">newgem.c.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/ext/newgem/newgem_h_tt.html">newgem.h.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/gitignore_tt.html">gitignore.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/lib/newgem_rb_tt.html">newgem.rb.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/lib/newgem/version_rb_tt.html">version.rb.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/newgem_gemspec_tt.html">newgem.gemspec.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/rspec_tt.html">rspec.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/spec/newgem_spec_rb_tt.html">newgem_spec.rb.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/spec/spec_helper_rb_tt.html">spec_helper.rb.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/test/minitest_helper_rb_tt.html">minitest_helper.rb.tt</a>
  
    <li><a href="../../../lib/bundler/templates/newgem/test/test_newgem_rb_tt.html">test_newgem.rb.tt</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page lib/bundler/man/bundle-exec.txt">

<p>BUNDLE-EXEC(1)                                                 
BUNDLE-EXEC(1)</p>

<p>NAME</p>

<pre>bundle-exec - Execute a command in the context of the bundle</pre>

<p>SYNOPSIS</p>

<pre>bundle exec [--keep-file-descriptors] command</pre>

<p>DESCRIPTION</p>

<pre class="ruby"><span class="ruby-constant">This</span>  <span class="ruby-identifier">command</span>  <span class="ruby-identifier">executes</span>  <span class="ruby-identifier">the</span>  <span class="ruby-identifier">command</span>, <span class="ruby-identifier">making</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">gems</span> <span class="ruby-identifier">specified</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">the</span>
<span class="ruby-constant">Gemfile</span>(<span class="ruby-value">5</span>) <span class="ruby-identifier">available</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">require</span> <span class="ruby-keyword">in</span> <span class="ruby-constant">Ruby</span> <span class="ruby-identifier">programs</span>.

<span class="ruby-constant">Essentially</span>, <span class="ruby-keyword">if</span> <span class="ruby-identifier">you</span>  <span class="ruby-identifier">would</span>  <span class="ruby-identifier">normally</span>  <span class="ruby-identifier">have</span>  <span class="ruby-identifier">run</span>  <span class="ruby-identifier">something</span>  <span class="ruby-identifier">like</span>  <span class="ruby-identifier">rspec</span>
<span class="ruby-identifier">spec</span><span class="ruby-operator">/</span><span class="ruby-identifier">my_spec</span>.<span class="ruby-identifier">rb</span>,  <span class="ruby-keyword">and</span>  <span class="ruby-identifier">you</span>  <span class="ruby-identifier">want</span>  <span class="ruby-identifier">to</span> <span class="ruby-identifier">use</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">gems</span> <span class="ruby-identifier">specified</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">the</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">-</span>
<span class="ruby-identifier">file</span>(<span class="ruby-value">5</span>) <span class="ruby-keyword">and</span> <span class="ruby-identifier">installed</span> <span class="ruby-identifier">via</span> <span class="ruby-identifier">bundle</span> <span class="ruby-identifier">install</span>(<span class="ruby-value">1</span>) <span class="ruby-identifier">bundle</span><span class="ruby-operator">-</span><span class="ruby-identifier">install</span><span class="ruby-value">.1</span>.<span class="ruby-identifier">html</span>,  <span class="ruby-identifier">you</span>
<span class="ruby-identifier">should</span> <span class="ruby-identifier">run</span> <span class="ruby-identifier">bundle</span> <span class="ruby-identifier">exec</span> <span class="ruby-identifier">rspec</span> <span class="ruby-identifier">spec</span><span class="ruby-operator">/</span><span class="ruby-identifier">my_spec</span>.<span class="ruby-identifier">rb</span>.

<span class="ruby-constant">Note</span>  <span class="ruby-identifier">that</span> <span class="ruby-identifier">bundle</span> <span class="ruby-identifier">exec</span> <span class="ruby-identifier">does</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">require</span> <span class="ruby-identifier">that</span> <span class="ruby-identifier">an</span> <span class="ruby-identifier">executable</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">available</span>
<span class="ruby-identifier">on</span> <span class="ruby-identifier">your</span> <span class="ruby-identifier">shell</span><span class="ruby-string">'s $PATH.
</span></pre>

<p>OPTIONS</p>

<pre>--keep-file-descriptors
       Exec in Ruby 2.0 began discarding non-standard file descriptors.
       When  this flag is passed, exec will revert to the 1.9 behaviour
       of passing all file descriptors to the new process.</pre>

<p>BUNDLE INSTALL â€“BINSTUBS</p>

<pre>If  you  use  the   --binstubs   flag   in   bundle   install(1)   bun-
dle-install.1.html,  Bundler  will  automatically  create  a  directory
(which defaults to app_root/bin)  containing  all  of  the  executables
available from gems in the bundle.

After  using --binstubs, bin/rspec spec/my_spec.rb is identical to bun-
dle exec rspec spec/my_spec.rb.</pre>

<p>ENVIRONMENT MODIFICATIONS</p>

<pre>    bundle exec makes a number of changes to the  shell  environment,  then
    executes the command you specify in full.

    o   make  sure  that  it's  still  possible to shell out to bundle from
        inside a command invoked by bundle exec (using $BUNDLE_BIN_PATH)

    o   put  the  directory  containing  executables  (like  rails,  rspec,
        rackup) for your bundle on $PATH

    o   make  sure  that if bundler is invoked in the subshell, it uses the
        same Gemfile (by setting BUNDLE_GEMFILE)

    o   add -rbundler/setup to $RUBYOPT, which makes sure  that  Ruby  pro-
        grams invoked in the subshell can see the gems in the bundle

    It also modifies Rubygems:

    o   disallow loading additional gems not in the bundle

    o   modify  the gem method to be a no-op if a gem matching the require-
        ments is in the bundle, and to raise a Gem::LoadError if it's not

    o   Define Gem.refresh to be a no-op, since the source index is  always
        frozen  when  using  bundler,  and  to prevent gems from the system
        leaking into the environment

    o   Override Gem.bin_path to use the gems in the bundle, making  system
        executables work

    o   Add all gems in the bundle into Gem.loaded_specs

Shelling out
    Any  Ruby  code that opens a subshell (like system, backticks, or %x{})
    will automatically use the current Bundler environment. If you need  to
    shell  out  to  a Ruby command that is not part of your current bundle,
    use the with_clean_env method  with  a  block.  Any  subshells  created
    inside  the  block will be given the environment present before Bundler
    was activated. For example, Homebrew commands run Ruby, but don't  work
    inside a bundle:

        Bundler.with_clean_env do
          `brew install wget`
        end

    Using  with_clean_env  is  also  necessary if you are shelling out to a
    different bundle. Any Bundler commands run in a subshell  will  inherit
    the  current  Gemfile, so commands that need to run in the context of a
    different bundle also need to use with_clean_env.

        Bundler.with_clean_env do
          Dir.chdir &quot;/other/bundler/project&quot; do
            `bundle exec ./script`
          end
        end

    Bundler provides convenience helpers that wrap  system  and  exec,  and
    they can be used like this:

        Bundler.clean_system('brew install wget')
        Bundler.clean_exec('brew install wget')</pre>

<p>RUBYGEMS PLUGINS</p>

<pre>At  present,  the  Rubygems  plugin  system  requires  all  files named
rubygems_plugin.rb on the load path of any installed gem when any  Ruby
code requires rubygems.rb. This includes executables installed into the
system, like rails, rackup, and rspec.

Since Rubygems plugins can contain arbitrary Ruby code,  they  commonly
end up activating themselves or their dependencies.

For  instance,  the gemcutter 0.5 gem depended on json_pure. If you had
that version of gemcutter installed (even if you also had a newer  ver-
sion  without  this problem), Rubygems would activate gemcutter 0.5 and
json_pure &lt;latest&gt;.

If your Gemfile(5) also contained json_pure (or a gem with a dependency
on  json_pure),  the  latest version on your system might conflict with
the version in your Gemfile(5), or the snapshot version  in  your  Gem-
file.lock.

If this happens, bundler will say:

    You have already activated json_pure 1.4.6 but your Gemfile
    requires json_pure 1.4.3. Consider using bundle exec.

In  this  situation, you almost certainly want to remove the underlying
gem with the problematic gem plugin. In general, the authors  of  these
plugins  (in this case, the gemcutter gem) have released newer versions
that are more careful in their plugins.

You can find a list of all the gems containing gem plugins by running

    ruby -rubygems -e &quot;puts Gem.find_files('rubygems_plugin.rb')&quot;

At the very least, you should remove all but the newest version of each
gem  plugin, and also remove all gem plugins that you aren't using (gem
uninstall gem_name).

                          December 2013                  BUNDLE-EXEC(1)</pre>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

