<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Mail::Message - mail-2.6.1 Documentation</title>

<link href="../fonts.css" rel="stylesheet">
<link href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/navigation.js"></script>
<script src="../js/search_index.js"></script>
<script src="../js/search.js"></script>
<script src="../js/searcher.js"></script>
<script src="../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../Object.html">Object</a>
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="Patterns.html">Mail::Patterns</a>
  
  
  
    <li><a class="include" href="Utilities.html">Mail::Utilities</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-from_hash">::from_hash</a>
    
    <li ><a href="#method-c-from_yaml">::from_yaml</a>
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-3C-3D-3E">#&lt;=&gt;</a>
    
    <li ><a href="#method-i-3D-3D">#==</a>
    
    <li ><a href="#method-i-5B-5D">#[]</a>
    
    <li ><a href="#method-i-5B-5D-3D">#[]=</a>
    
    <li ><a href="#method-i-action">#action</a>
    
    <li ><a href="#method-i-add_boundary">#add_boundary</a>
    
    <li ><a href="#method-i-add_charset">#add_charset</a>
    
    <li ><a href="#method-i-add_content_transfer_encoding">#add_content_transfer_encoding</a>
    
    <li ><a href="#method-i-add_content_type">#add_content_type</a>
    
    <li ><a href="#method-i-add_date">#add_date</a>
    
    <li ><a href="#method-i-add_encoding_to_body">#add_encoding_to_body</a>
    
    <li ><a href="#method-i-add_file">#add_file</a>
    
    <li ><a href="#method-i-add_message_id">#add_message_id</a>
    
    <li ><a href="#method-i-add_mime_version">#add_mime_version</a>
    
    <li ><a href="#method-i-add_multipart_alternate_header">#add_multipart_alternate_header</a>
    
    <li ><a href="#method-i-add_multipart_mixed_header">#add_multipart_mixed_header</a>
    
    <li ><a href="#method-i-add_part">#add_part</a>
    
    <li ><a href="#method-i-add_required_fields">#add_required_fields</a>
    
    <li ><a href="#method-i-add_required_message_fields">#add_required_message_fields</a>
    
    <li ><a href="#method-i-all_parts">#all_parts</a>
    
    <li ><a href="#method-i-attachment">#attachment</a>
    
    <li ><a href="#method-i-attachment-3F">#attachment?</a>
    
    <li ><a href="#method-i-attachments">#attachments</a>
    
    <li ><a href="#method-i-bcc">#bcc</a>
    
    <li ><a href="#method-i-bcc-3D">#bcc=</a>
    
    <li ><a href="#method-i-bcc_addrs">#bcc_addrs</a>
    
    <li ><a href="#method-i-body">#body</a>
    
    <li ><a href="#method-i-body-3D">#body=</a>
    
    <li ><a href="#method-i-body_encoding">#body_encoding</a>
    
    <li ><a href="#method-i-body_encoding-3D">#body_encoding=</a>
    
    <li ><a href="#method-i-body_lazy">#body_lazy</a>
    
    <li ><a href="#method-i-bounced-3F">#bounced?</a>
    
    <li ><a href="#method-i-boundary">#boundary</a>
    
    <li ><a href="#method-i-cc">#cc</a>
    
    <li ><a href="#method-i-cc-3D">#cc=</a>
    
    <li ><a href="#method-i-cc_addrs">#cc_addrs</a>
    
    <li ><a href="#method-i-charset">#charset</a>
    
    <li ><a href="#method-i-charset-3D">#charset=</a>
    
    <li ><a href="#method-i-comments">#comments</a>
    
    <li ><a href="#method-i-comments-3D">#comments=</a>
    
    <li ><a href="#method-i-content_description">#content_description</a>
    
    <li ><a href="#method-i-content_description-3D">#content_description=</a>
    
    <li ><a href="#method-i-content_disposition">#content_disposition</a>
    
    <li ><a href="#method-i-content_disposition-3D">#content_disposition=</a>
    
    <li ><a href="#method-i-content_id">#content_id</a>
    
    <li ><a href="#method-i-content_id-3D">#content_id=</a>
    
    <li ><a href="#method-i-content_location">#content_location</a>
    
    <li ><a href="#method-i-content_location-3D">#content_location=</a>
    
    <li ><a href="#method-i-content_transfer_encoding">#content_transfer_encoding</a>
    
    <li ><a href="#method-i-content_transfer_encoding-3D">#content_transfer_encoding=</a>
    
    <li ><a href="#method-i-content_type">#content_type</a>
    
    <li ><a href="#method-i-content_type-3D">#content_type=</a>
    
    <li ><a href="#method-i-content_type_parameters">#content_type_parameters</a>
    
    <li ><a href="#method-i-convert_to_multipart">#convert_to_multipart</a>
    
    <li ><a href="#method-i-date">#date</a>
    
    <li ><a href="#method-i-date-3D">#date=</a>
    
    <li ><a href="#method-i-decode_body">#decode_body</a>
    
    <li ><a href="#method-i-decode_body_as_text">#decode_body_as_text</a>
    
    <li ><a href="#method-i-decoded">#decoded</a>
    
    <li ><a href="#method-i-default">#default</a>
    
    <li ><a href="#method-i-deliver">#deliver</a>
    
    <li ><a href="#method-i-deliver-21">#deliver!</a>
    
    <li ><a href="#method-i-delivery_method">#delivery_method</a>
    
    <li ><a href="#method-i-delivery_status_part">#delivery_status_part</a>
    
    <li ><a href="#method-i-delivery_status_report-3F">#delivery_status_report?</a>
    
    <li ><a href="#method-i-destinations">#destinations</a>
    
    <li ><a href="#method-i-diagnostic_code">#diagnostic_code</a>
    
    <li ><a href="#method-i-do_delivery">#do_delivery</a>
    
    <li ><a href="#method-i-encode-21">#encode!</a>
    
    <li ><a href="#method-i-encoded">#encoded</a>
    
    <li ><a href="#method-i-envelope_date">#envelope_date</a>
    
    <li ><a href="#method-i-envelope_from">#envelope_from</a>
    
    <li ><a href="#method-i-error_status">#error_status</a>
    
    <li ><a href="#method-i-errors">#errors</a>
    
    <li ><a href="#method-i-filename">#filename</a>
    
    <li ><a href="#method-i-final_recipient">#final_recipient</a>
    
    <li ><a href="#method-i-find_attachment">#find_attachment</a>
    
    <li ><a href="#method-i-find_first_mime_type">#find_first_mime_type</a>
    
    <li ><a href="#method-i-from">#from</a>
    
    <li ><a href="#method-i-from-3D">#from=</a>
    
    <li ><a href="#method-i-from_addrs">#from_addrs</a>
    
    <li ><a href="#method-i-has_attachments-3F">#has_attachments?</a>
    
    <li ><a href="#method-i-has_charset-3F">#has_charset?</a>
    
    <li ><a href="#method-i-has_content_transfer_encoding-3F">#has_content_transfer_encoding?</a>
    
    <li ><a href="#method-i-has_content_type-3F">#has_content_type?</a>
    
    <li ><a href="#method-i-has_date-3F">#has_date?</a>
    
    <li ><a href="#method-i-has_message_id-3F">#has_message_id?</a>
    
    <li ><a href="#method-i-has_mime_version-3F">#has_mime_version?</a>
    
    <li ><a href="#method-i-header">#header</a>
    
    <li ><a href="#method-i-header-3D">#header=</a>
    
    <li ><a href="#method-i-header_fields">#header_fields</a>
    
    <li ><a href="#method-i-headers">#headers</a>
    
    <li ><a href="#method-i-html_part">#html_part</a>
    
    <li ><a href="#method-i-html_part-3D">#html_part=</a>
    
    <li ><a href="#method-i-identify_and_set_transfer_encoding">#identify_and_set_transfer_encoding</a>
    
    <li ><a href="#method-i-in_reply_to">#in_reply_to</a>
    
    <li ><a href="#method-i-in_reply_to-3D">#in_reply_to=</a>
    
    <li ><a href="#method-i-inform_interceptors">#inform_interceptors</a>
    
    <li ><a href="#method-i-inform_observers">#inform_observers</a>
    
    <li ><a href="#method-i-init_with_hash">#init_with_hash</a>
    
    <li ><a href="#method-i-init_with_string">#init_with_string</a>
    
    <li class="calls-super" ><a href="#method-i-initialize_copy">#initialize_copy</a>
    
    <li ><a href="#method-i-inspect">#inspect</a>
    
    <li ><a href="#method-i-is_marked_for_delete-3F">#is_marked_for_delete?</a>
    
    <li ><a href="#method-i-keywords">#keywords</a>
    
    <li ><a href="#method-i-keywords-3D">#keywords=</a>
    
    <li ><a href="#method-i-main_type">#main_type</a>
    
    <li ><a href="#method-i-mark_for_delete-3D">#mark_for_delete=</a>
    
    <li ><a href="#method-i-message_content_type">#message_content_type</a>
    
    <li ><a href="#method-i-message_id">#message_id</a>
    
    <li ><a href="#method-i-message_id-3D">#message_id=</a>
    
    <li class="calls-super" ><a href="#method-i-method_missing">#method_missing</a>
    
    <li ><a href="#method-i-mime_parameters">#mime_parameters</a>
    
    <li ><a href="#method-i-mime_type">#mime_type</a>
    
    <li ><a href="#method-i-mime_version">#mime_version</a>
    
    <li ><a href="#method-i-mime_version-3D">#mime_version=</a>
    
    <li ><a href="#method-i-multipart-3F">#multipart?</a>
    
    <li ><a href="#method-i-multipart_report-3F">#multipart_report?</a>
    
    <li ><a href="#method-i-parse_message">#parse_message</a>
    
    <li ><a href="#method-i-part">#part</a>
    
    <li ><a href="#method-i-parts">#parts</a>
    
    <li ><a href="#method-i-process_body_raw">#process_body_raw</a>
    
    <li ><a href="#method-i-raw_envelope">#raw_envelope</a>
    
    <li ><a href="#method-i-raw_source">#raw_source</a>
    
    <li ><a href="#method-i-raw_source-3D">#raw_source=</a>
    
    <li ><a href="#method-i-read">#read</a>
    
    <li ><a href="#method-i-ready_to_send-21">#ready_to_send!</a>
    
    <li ><a href="#method-i-received">#received</a>
    
    <li ><a href="#method-i-received-3D">#received=</a>
    
    <li ><a href="#method-i-references">#references</a>
    
    <li ><a href="#method-i-references-3D">#references=</a>
    
    <li ><a href="#method-i-register_for_delivery_notification">#register_for_delivery_notification</a>
    
    <li ><a href="#method-i-remote_mta">#remote_mta</a>
    
    <li ><a href="#method-i-reply">#reply</a>
    
    <li ><a href="#method-i-reply_to">#reply_to</a>
    
    <li ><a href="#method-i-reply_to-3D">#reply_to=</a>
    
    <li ><a href="#method-i-resent_bcc">#resent_bcc</a>
    
    <li ><a href="#method-i-resent_bcc-3D">#resent_bcc=</a>
    
    <li ><a href="#method-i-resent_cc">#resent_cc</a>
    
    <li ><a href="#method-i-resent_cc-3D">#resent_cc=</a>
    
    <li ><a href="#method-i-resent_date">#resent_date</a>
    
    <li ><a href="#method-i-resent_date-3D">#resent_date=</a>
    
    <li ><a href="#method-i-resent_from">#resent_from</a>
    
    <li ><a href="#method-i-resent_from-3D">#resent_from=</a>
    
    <li ><a href="#method-i-resent_message_id">#resent_message_id</a>
    
    <li ><a href="#method-i-resent_message_id-3D">#resent_message_id=</a>
    
    <li ><a href="#method-i-resent_sender">#resent_sender</a>
    
    <li ><a href="#method-i-resent_sender-3D">#resent_sender=</a>
    
    <li ><a href="#method-i-resent_to">#resent_to</a>
    
    <li ><a href="#method-i-resent_to-3D">#resent_to=</a>
    
    <li ><a href="#method-i-retryable-3F">#retryable?</a>
    
    <li ><a href="#method-i-return_path">#return_path</a>
    
    <li ><a href="#method-i-return_path-3D">#return_path=</a>
    
    <li ><a href="#method-i-sender">#sender</a>
    
    <li ><a href="#method-i-sender-3D">#sender=</a>
    
    <li ><a href="#method-i-separate_parts">#separate_parts</a>
    
    <li ><a href="#method-i-set_envelope">#set_envelope</a>
    
    <li ><a href="#method-i-set_envelope_header">#set_envelope_header</a>
    
    <li ><a href="#method-i-skip_deletion">#skip_deletion</a>
    
    <li ><a href="#method-i-smtp_envelope_from">#smtp_envelope_from</a>
    
    <li ><a href="#method-i-smtp_envelope_from-3D">#smtp_envelope_from=</a>
    
    <li ><a href="#method-i-smtp_envelope_to">#smtp_envelope_to</a>
    
    <li ><a href="#method-i-smtp_envelope_to-3D">#smtp_envelope_to=</a>
    
    <li ><a href="#method-i-sub_type">#sub_type</a>
    
    <li ><a href="#method-i-subject">#subject</a>
    
    <li ><a href="#method-i-subject-3D">#subject=</a>
    
    <li ><a href="#method-i-text-3F">#text?</a>
    
    <li ><a href="#method-i-text_part">#text_part</a>
    
    <li ><a href="#method-i-text_part-3D">#text_part=</a>
    
    <li ><a href="#method-i-to">#to</a>
    
    <li ><a href="#method-i-to-3D">#to=</a>
    
    <li ><a href="#method-i-to_addrs">#to_addrs</a>
    
    <li ><a href="#method-i-to_s">#to_s</a>
    
    <li ><a href="#method-i-to_yaml">#to_yaml</a>
    
    <li ><a href="#method-i-transport_encoding">#transport_encoding</a>
    
    <li ><a href="#method-i-transport_encoding-3D">#transport_encoding=</a>
    
    <li ><a href="#method-i-without_attachments-21">#without_attachments!</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Mail::Message">
  <h1 id="class-Mail::Message" class="class">
    class Mail::Message
  </h1>

  <section class="description">
    
<p>The <a href="Message.html">Message</a> class provides a single point of
access to all things to do with an email message.</p>

<p>You create a new email message by calling the <a
href="Message.html#method-c-new">::new</a> method, or just <a
href="../Mail.html#method-c-new">Mail.new</a></p>

<p>A <a href="Message.html">Message</a> object by default has the following
objects inside it:</p>
<ul><li>
<p>A <a href="Header.html">Header</a> object which contains all information
and settings of the header of the email</p>
</li><li>
<p><a href="Body.html">Body</a> object which contains all parts of the email
that are not part of the header, this includes any attachments, body text,
MIME parts etc.</p>
</li></ul>

<h2 id="class-Mail::Message-label-Per+RFC2822">Per RFC2822<span><a href="#class-Mail::Message-label-Per+RFC2822">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<pre>2.1. General Description

 At the most basic level, a message is a series of characters.  A
 message that is conformant with this standard is comprised of
 characters with values in the range 1 through 127 and interpreted as
 US-ASCII characters [ASCII].  For brevity, this document sometimes
 refers to this range of characters as simply &quot;US-ASCII characters&quot;.

 Note: This standard specifies that messages are made up of characters
 in the US-ASCII range of 1 through 127.  There are other documents,
 specifically the MIME document series [RFC2045, RFC2046, RFC2047,
 RFC2048, RFC2049], that extend this standard to allow for values
 outside of that range.  Discussion of those mechanisms is not within
 the scope of this standard.

 Messages are divided into lines of characters.  A line is a series of
 characters that is delimited with the two characters carriage-return
 and line-feed; that is, the carriage return (CR) character (ASCII
 value 13) followed immediately by the line feed (LF) character (ASCII
 value 10).  (The carriage-return/line-feed pair is usually written in
 this document as &quot;CRLF&quot;.)

 A message consists of header fields (collectively called &quot;the header
 of the message&quot;) followed, optionally, by a body.  The header is a
 sequence of lines of characters with special syntax as defined in
 this standard. The body is simply a sequence of characters that
 follows the header and is separated from the header by an empty line
 (i.e., a line with nothing preceding the CRLF).</pre>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-delivery_handler" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">delivery_handler</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>If you assign a delivery handler, mail will call :deliver_mail on the
object you assign to <a
href="Message.html#attribute-i-delivery_handler">#delivery_handler</a>, it
will pass itself as the single argument.</p>

<p>If you define a <a
href="Message.html#attribute-i-delivery_handler">#delivery_handler</a>,
then you are responsible for the following actions in the delivery cycle:</p>
<ul><li>
<p>Appending the mail object to Mail.deliveries as you see fit.</p>
</li><li>
<p>Checking the mail.perform_deliveries flag to decide if you should actually
call :deliver! the mail object or not.</p>
</li><li>
<p>Checking the mail.raise_delivery_errors flag to decide if you should raise
delivery errors if they occur.</p>
</li><li>
<p>Actually calling :deliver! (with the bang) on the mail object to get it to
deliver itself.</p>
</li></ul>

<p>A simplest implementation of a <a
href="Message.html#attribute-i-delivery_handler">#delivery_handler</a>
would be</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">MyObject</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>
    <span class="ruby-ivar">@mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'To: mikel@test.lindsaar.net'</span>)
    <span class="ruby-ivar">@mail</span>.<span class="ruby-identifier">delivery_handler</span> = <span class="ruby-keyword">self</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">mail</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">deliver_mail</span>(<span class="ruby-identifier">mail</span>)
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Then doing:</p>

<pre>obj = MyObject.new
obj.mail.deliver</pre>

<p>Would cause <a href="../Mail.html">Mail</a> to call obj.deliver_mail
passing itself as a parameter, which then can just yield and let <a
href="../Mail.html">Mail</a> do its own private <a
href="Message.html#method-i-do_delivery">#do_delivery</a> method.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-perform_deliveries" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">perform_deliveries</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>If set to false, mail will go through the motions of doing a delivery, but
not actually call the delivery method or append the mail object to the
Mail.deliveries collection.  Useful for testing.</p>

<pre class="ruby"><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment">#=&gt; 0</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">delivery_method</span> :<span class="ruby-identifier">smtp</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">perform_deliveries</span> = <span class="ruby-keyword">false</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">deliver</span>                        <span class="ruby-comment"># Mail::SMTP not called here</span>
<span class="ruby-constant">Mail</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment">#=&gt; 0</span>
</pre>

<p>If you want to test and query the Mail.deliveries collection to see what
mail you sent, you should set <a
href="Message.html#attribute-i-perform_deliveries">#perform_deliveries</a>
to true and use the :test mail <a
href="Message.html#method-i-delivery_method">#delivery_method</a>:</p>

<pre class="ruby"><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment">#=&gt; 0</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">delivery_method</span> :<span class="ruby-identifier">test</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">perform_deliveries</span> = <span class="ruby-keyword">true</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">deliver</span>
<span class="ruby-constant">Mail</span>.<span class="ruby-identifier">deliveries</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment">#=&gt; 1</span>
</pre>

<p>This setting is ignored by mail (though still available as a flag) if you
define a <a
href="Message.html#attribute-i-delivery_handler">#delivery_handler</a></p>
        
        </div>
      </div>
      
      <div id="attribute-i-raise_delivery_errors" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">raise_delivery_errors</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>If set to false, mail will silently catch and ignore any exceptions raised
through attempting to deliver an email.</p>

<p>This setting is ignored by mail (though still available as a flag) if you
define a <a
href="Message.html#attribute-i-delivery_handler">#delivery_handler</a></p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-from_hash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_hash</span><span
            class="method-args">(hash)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="from_hash-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1869</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">from_hash</span>(<span class="ruby-identifier">hash</span>)
  <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Message</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">hash</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-from_yaml" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_yaml</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="from_yaml-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1847</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">from_yaml</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">hash</span> = <span class="ruby-constant">YAML</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">m</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:headers</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-string">'headers'</span>])
  <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">'headers'</span>)
  <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">case</span>
    <span class="ruby-keyword">when</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-string">'delivery_handler'</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">m</span>.<span class="ruby-identifier">delivery_handler</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">v</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">blank?</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">NameError</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-string">'transport_encoding'</span>
      <span class="ruby-identifier">m</span>.<span class="ruby-identifier">transport_encoding</span>(<span class="ruby-identifier">v</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-string">'multipart_body'</span>
      <span class="ruby-identifier">v</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">add_part</span> <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Part</span>.<span class="ruby-identifier">from_yaml</span>(<span class="ruby-identifier">part</span>) }
    <span class="ruby-keyword">when</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^@/</span>
      <span class="ruby-identifier">m</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_sym</span>, <span class="ruby-identifier">v</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">m</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(*args, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h2 id="method-c-new-label-Making+an+email">Making an email<span><a href="#method-c-new-label-Making+an+email">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>You can make an new mail object via a block, passing a string, file or
direct assignment.</p>

<h3 id="method-c-new-label-Making+an+email+via+a+block">Making an email via a block<span><a href="#method-c-new-label-Making+an+email+via+a+block">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
     <span class="ruby-identifier">from</span> <span class="ruby-string">'mikel@test.lindsaar.net'</span>
       <span class="ruby-identifier">to</span> <span class="ruby-string">'you@test.lindsaar.net'</span>
  <span class="ruby-identifier">subject</span> <span class="ruby-string">'This is a test email'</span>
     <span class="ruby-identifier">body</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-string">'body.txt'</span>)
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment">#=&gt; &quot;From: mikel@test.lindsaar.net\r\nTo: you@...</span>
</pre>

<h3 id="method-c-new-label-Making+an+email+via+passing+a+string">Making an email via passing a string<span><a href="#method-c-new-label-Making+an+email+via+passing+a+string">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;To: mikel@test.lindsaar.net\r\nSubject: Hello\r\n\r\nHi there!&quot;</span>)
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment">#=&gt; 'Hi there!'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span>   <span class="ruby-comment">#=&gt; 'Hello'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span>        <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>

<h3 id="method-c-new-label-Making+an+email+from+a+file">Making an email from a file<span><a href="#method-c-new-label-Making+an+email+from+a+file">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">read</span>(<span class="ruby-string">'path/to/file.eml'</span>)
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment">#=&gt; 'Hi there!'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span>   <span class="ruby-comment">#=&gt; 'Hello'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span>        <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>

<h3 id="method-c-new-label-Making+an+email+via+assignment">Making an email via assignment<span><a href="#method-c-new-label-Making+an+email+via+assignment">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>You can assign values to a mail object via four approaches:</p>
<ul><li>
<p>Message#field_name=(value)</p>
</li><li>
<p>Message#field_name(value)</p>
</li><li>
<p><a href="'field_name'">Message#</a>=(value)</p>
</li><li>
<p><a href=":field_name">Message#</a>=(value)</p>
</li></ul>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">mail</span>[<span class="ruby-string">'from'</span>] = <span class="ruby-string">'mikel@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>[:<span class="ruby-identifier">to</span>]    = <span class="ruby-string">'you@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span> <span class="ruby-string">'This is a test email'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>    = <span class="ruby-string">'This is a body'</span>

<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment">#=&gt; &quot;From: mikel@test.lindsaar.net\r\nTo: you@...</span>
</pre>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@body</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@body_raw</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@separate_parts</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@text_part</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@html_part</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@errors</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@header</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@charset</span> = <span class="ruby-string">'UTF-8'</span>
  <span class="ruby-ivar">@defaulted_charset</span> = <span class="ruby-keyword">true</span>

  <span class="ruby-ivar">@smtp_envelope_from</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@smtp_envelope_to</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-ivar">@perform_deliveries</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@raise_delivery_errors</span> = <span class="ruby-keyword">true</span>

  <span class="ruby-ivar">@delivery_handler</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-ivar">@delivery_method</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">delivery_method</span>.<span class="ruby-identifier">dup</span>

  <span class="ruby-ivar">@transport_encoding</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Encodings</span>.<span class="ruby-identifier">get_encoding</span>(<span class="ruby-string">'7bit'</span>)

  <span class="ruby-ivar">@mark_for_delete</span> = <span class="ruby-keyword">false</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:each_pair</span>)
    <span class="ruby-identifier">init_with_hash</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">first</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">init_with_string</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">flatten</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">to_s</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-3C-3D-3E" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">&lt;=&gt;</span><span
            class="method-args">(other)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Provides the operator needed for sort et al.</p>

<p>Compares this mail object with another mail object, this is done by date,
so an email that is older than another will appear first.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail1</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">date</span>(<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>)
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">mail2</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">date</span>(<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-value">86400</span>) <span class="ruby-comment"># 1 day older</span>
<span class="ruby-keyword">end</span>
[<span class="ruby-identifier">mail2</span>, <span class="ruby-identifier">mail1</span>].<span class="ruby-identifier">sort</span> <span class="ruby-comment">#=&gt; [mail2, mail1]</span>
</pre>
          
          

          
          <div class="method-source-code" id="3C-3D-3E-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 312</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;=&gt;</span>(<span class="ruby-identifier">other</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-value">1</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">date</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">date</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-3D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">==</span><span
            class="method-args">(other)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Two emails are the same if they have the same fields and body contents. One
gotcha here is that <a href="../Mail.html">Mail</a> will insert Message-IDs
when calling encoded, so doing mail1.encoded == mail2.encoded is most
probably not going to return what you think as the assigned Message-IDs by
<a href="../Mail.html">Mail</a> (if not already defined as the same) will
ensure that the two objects are unique, and this comparison will ALWAYS
return false.</p>

<p>So the == operator has been defined like so:  Two messages are the same if
they have the same content, ignoring the Message-ID field, unless BOTH
emails have a defined and different Message-ID value, then they are false.</p>

<p>So, in practice the == operator works like this:</p>

<pre class="ruby"><span class="ruby-identifier">m1</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Subject: Hello\r\n\r\nHello&quot;</span>)
<span class="ruby-identifier">m2</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Subject: Hello\r\n\r\nHello&quot;</span>)
<span class="ruby-identifier">m1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">m2</span> <span class="ruby-comment">#=&gt; true</span>

<span class="ruby-identifier">m1</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Subject: Hello\r\n\r\nHello&quot;</span>)
<span class="ruby-identifier">m2</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Message-ID: &lt;1234@test&gt;\r\nSubject: Hello\r\n\r\nHello&quot;</span>)
<span class="ruby-identifier">m1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">m2</span> <span class="ruby-comment">#=&gt; true</span>

<span class="ruby-identifier">m1</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Message-ID: &lt;1234@test&gt;\r\nSubject: Hello\r\n\r\nHello&quot;</span>)
<span class="ruby-identifier">m2</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Subject: Hello\r\n\r\nHello&quot;</span>)
<span class="ruby-identifier">m1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">m2</span> <span class="ruby-comment">#=&gt; true</span>

<span class="ruby-identifier">m1</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Message-ID: &lt;1234@test&gt;\r\nSubject: Hello\r\n\r\nHello&quot;</span>)
<span class="ruby-identifier">m2</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Message-ID: &lt;1234@test&gt;\r\nSubject: Hello\r\n\r\nHello&quot;</span>)
<span class="ruby-identifier">m1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">m2</span> <span class="ruby-comment">#=&gt; true</span>

<span class="ruby-identifier">m1</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Message-ID: &lt;1234@test&gt;\r\nSubject: Hello\r\n\r\nHello&quot;</span>)
<span class="ruby-identifier">m2</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Message-ID: &lt;DIFFERENT@test&gt;\r\nSubject: Hello\r\n\r\nHello&quot;</span>)
<span class="ruby-identifier">m1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">m2</span> <span class="ruby-comment">#=&gt; false</span>
</pre>
          
          

          
          <div class="method-source-code" id="3D-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 351</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:encoded</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">message_id</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">message_id</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">encoded</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">encoded</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">self_message_id</span>, <span class="ruby-identifier">other_message_id</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">message_id</span>, <span class="ruby-identifier">other</span>.<span class="ruby-identifier">message_id</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">message_id</span>, <span class="ruby-identifier">other</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;temp@test&gt;'</span>, <span class="ruby-string">'&lt;temp@test&gt;'</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">encoded</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">encoded</span>
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">message_id</span>, <span class="ruby-identifier">other</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-identifier">self_message_id</span>, <span class="ruby-identifier">other_message_id</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-5B-5D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">[]</span><span
            class="method-args">(name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allows you to read an arbitrary header</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>[<span class="ruby-string">'foo'</span>] = <span class="ruby-string">'1234'</span>
<span class="ruby-identifier">mail</span>[<span class="ruby-string">'foo'</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-comment">#=&gt; '1234'</span>
</pre>
          
          

          
          <div class="method-source-code" id="5B-5D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1318</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">header</span>[<span class="ruby-identifier">underscoreize</span>(<span class="ruby-identifier">name</span>)]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-5B-5D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">[]=</span><span
            class="method-args">(name, value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allows you to add an arbitrary header</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>[<span class="ruby-string">'foo'</span>] = <span class="ruby-string">'1234'</span>
<span class="ruby-identifier">mail</span>[<span class="ruby-string">'foo'</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-comment">#=&gt; '1234'</span>
</pre>
          
          

          
          <div class="method-source-code" id="5B-5D-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1300</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-string">'body'</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/content[-_]type/i</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-string">'charset'</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">charset</span> = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-action" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">action</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="action-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1567</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">action</span>
  <span class="ruby-identifier">delivery_status_part</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">delivery_status_part</span>.<span class="ruby-identifier">action</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_charset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_charset</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds a content type and charset if the body is US-ASCII</p>

<p>Otherwise raises a warning</p>
          
          

          
          <div class="method-source-code" id="add_charset-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1461</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_charset</span>
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">body</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-comment"># Only give a warning if this isn't an attachment, has non US-ASCII and the user</span>
    <span class="ruby-comment"># has not specified an encoding explicitly.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@defaulted_charset</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">raw_source</span>.<span class="ruby-identifier">not_ascii_only?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">attachment?</span>
      <span class="ruby-identifier">warning</span> = <span class="ruby-string">&quot;Non US-ASCII detected and no charset defined.\nDefaulting to UTF-8, set your own if this is incorrect.\n&quot;</span>
      <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">warning</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_type</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-string">'charset'</span>] = <span class="ruby-ivar">@charset</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_content_transfer_encoding" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_content_transfer_encoding</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds a content transfer encoding</p>

<p>Otherwise raises a warning</p>
          
          

          
          <div class="method-source-code" id="add_content_transfer_encoding-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1476</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_content_transfer_encoding</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">only_us_ascii?</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_transfer_encoding</span>] = <span class="ruby-string">'7bit'</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">warning</span> = <span class="ruby-string">&quot;Non US-ASCII detected and no content-transfer-encoding defined.\nDefaulting to 8bit, set your own if this is incorrect.\n&quot;</span>
    <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">warning</span>)
    <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_transfer_encoding</span>] = <span class="ruby-string">'8bit'</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_content_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_content_type</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds a content type and charset if the body is US-ASCII</p>

<p>Otherwise raises a warning</p>
          
          

          
          <div class="method-source-code" id="add_content_type-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1454</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_content_type</span>
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_type</span>] = <span class="ruby-string">'text/plain'</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_date" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_date</span><span
            class="method-args">(date_val = '')</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new empty Date field and inserts it in the correct order into the
<a href="Header.html">Header</a>.  The <a
href="DateField.html">DateField</a> object will automatically generate
DateTime.now’s date if you try and encode it or output it <a
href="Message.html#method-i-to_s">#to_s</a> without specifying a date
yourself.</p>

<p>It will preserve any date you specify if you do.</p>
          
          

          
          <div class="method-source-code" id="add_date-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1437</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_date</span>(<span class="ruby-identifier">date_val</span> = <span class="ruby-string">''</span>)
  <span class="ruby-identifier">header</span>[<span class="ruby-string">'date'</span>] = <span class="ruby-identifier">date_val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_file</span><span
            class="method-args">(values)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds a file to the message.  You have two options with this method, you can
just pass in the absolute path to the file you want and <a
href="../Mail.html">Mail</a> will read the file, get the filename from the
path you pass in and guess the MIME media type, or you can pass in the
filename as a string, and pass in the file content as a blob.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">m</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">m</span>.<span class="ruby-identifier">add_file</span>(<span class="ruby-string">'/path/to/filename.png'</span>)

<span class="ruby-identifier">m</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">m</span>.<span class="ruby-identifier">add_file</span>(:<span class="ruby-identifier">filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'filename.png'</span>, :<span class="ruby-identifier">content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-string">'/path/to/file.jpg'</span>))
</pre>

<p>Note also that if you add a file to an existing message, <a
href="../Mail.html">Mail</a> will convert that message to a MIME multipart
email, moving whatever plain text body you had into its own text plain
part.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">m</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">body</span> <span class="ruby-string">'this is some text'</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">m</span>.<span class="ruby-identifier">multipart?</span> <span class="ruby-comment">#=&gt; false</span>
<span class="ruby-identifier">m</span>.<span class="ruby-identifier">add_file</span>(<span class="ruby-string">'/path/to/filename.png'</span>)
<span class="ruby-identifier">m</span>.<span class="ruby-identifier">multipart?</span> <span class="ruby-comment">#=&gt; true</span>
<span class="ruby-identifier">m</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">content_type</span>.<span class="ruby-identifier">content_type</span> <span class="ruby-comment">#=&gt; 'text/plain'</span>
<span class="ruby-identifier">m</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">content_type</span>.<span class="ruby-identifier">content_type</span> <span class="ruby-comment">#=&gt; 'image/png'</span>
</pre>

<p>See also <a href="Message.html#method-i-attachments">attachments</a></p>
          
          

          
          <div class="method-source-code" id="add_file-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1762</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_file</span>(<span class="ruby-identifier">values</span>)
  <span class="ruby-identifier">convert_to_multipart</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">multipart?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">decoded</span>.<span class="ruby-identifier">blank?</span>
  <span class="ruby-identifier">add_multipart_mixed_header</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
    <span class="ruby-identifier">basename</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">values</span>)
    <span class="ruby-identifier">filedata</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">values</span>, <span class="ruby-string">'rb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">read</span> }
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">basename</span> = <span class="ruby-identifier">values</span>[<span class="ruby-value">:filename</span>]
    <span class="ruby-identifier">filedata</span> = <span class="ruby-identifier">values</span>[<span class="ruby-value">:content</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">values</span>[<span class="ruby-value">:filename</span>], <span class="ruby-string">'rb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">read</span> }
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">attachments</span>[<span class="ruby-identifier">basename</span>] = <span class="ruby-identifier">filedata</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_message_id" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_message_id</span><span
            class="method-args">(msg_id_val = '')</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new empty Message-ID field and inserts it in the correct order
into the <a href="Header.html">Header</a>.  The <a
href="MessageIdField.html">MessageIdField</a> object will automatically
generate a unique message ID if you try and encode it or output it <a
href="Message.html#method-i-to_s">#to_s</a> without specifying a message
id.</p>

<p>It will preserve the message ID you specify if you do.</p>
          
          

          
          <div class="method-source-code" id="add_message_id-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1427</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_message_id</span>(<span class="ruby-identifier">msg_id_val</span> = <span class="ruby-string">''</span>)
  <span class="ruby-identifier">header</span>[<span class="ruby-string">'message-id'</span>] = <span class="ruby-identifier">msg_id_val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_mime_version" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_mime_version</span><span
            class="method-args">(ver_val = '')</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new empty Mime Version field and inserts it in the correct order
into the <a href="Header.html">Header</a>.  The MimeVersion object will
automatically generate set itself to ‘1.0’ if you try and encode it or
output it <a href="Message.html#method-i-to_s">#to_s</a> without specifying
a version yourself.</p>

<p>It will preserve any date you specify if you do.</p>
          
          

          
          <div class="method-source-code" id="add_mime_version-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1447</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_mime_version</span>(<span class="ruby-identifier">ver_val</span> = <span class="ruby-string">''</span>)
  <span class="ruby-identifier">header</span>[<span class="ruby-string">'mime-version'</span>] = <span class="ruby-identifier">ver_val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_part" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_part</span><span
            class="method-args">(part)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds a part to the parts list or creates the part list</p>
          
          

          
          <div class="method-source-code" id="add_part-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1706</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_part</span>(<span class="ruby-identifier">part</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">body</span>.<span class="ruby-identifier">multipart?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">decoded</span>.<span class="ruby-identifier">blank?</span>
    <span class="ruby-ivar">@text_part</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Part</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Content-Type: text/plain;'</span>)
    <span class="ruby-ivar">@text_part</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">body</span>.<span class="ruby-identifier">decoded</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@text_part</span>
    <span class="ruby-identifier">add_multipart_alternate_header</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">add_boundary</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">part</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-all_parts" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">all_parts</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="all_parts-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1922</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">all_parts</span>
  <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">p</span>, <span class="ruby-identifier">p</span>.<span class="ruby-identifier">all_parts</span>] }.<span class="ruby-identifier">flatten</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-attachment" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">attachment</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the attachment data if there is any</p>
          
          

          
          <div class="method-source-code" id="attachment-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1913</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">attachment</span>
  <span class="ruby-ivar">@attachment</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-attachment-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">attachment?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if this part is an attachment, false otherwise.</p>
          
          

          
          <div class="method-source-code" id="attachment-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1908</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">attachment?</span>
  <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">find_attachment</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-attachments" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">attachments</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an <a href="AttachmentsList.html">AttachmentsList</a> object, which
holds all of the attachments in the receiver object (either the entire
email or a part within) and all of its descendants.</p>

<p>It also allows you to add attachments to the mail object directly, like so:</p>

<pre>mail.attachments['filename.jpg'] = File.read('/path/to/filename.jpg')</pre>

<p>If you do this, then <a href="../Mail.html">Mail</a> will take the file
name and work out the MIME media type set the Content-Type,
Content-Disposition, Content-Transfer-Encoding and base64 encode the
contents of the attachment all for you.</p>

<p>You can also specify overrides if you want by passing a hash instead of a
string:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>[<span class="ruby-string">'filename.jpg'</span>] = {:<span class="ruby-identifier">mime_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'application/x-gzip'</span>,
                                    :<span class="ruby-identifier">content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-string">'/path/to/filename.jpg'</span>)}
</pre>

<p>If you want to use a different encoding than Base64, you can pass an
encoding in, but then it is up to you to pass in the content pre-encoded,
and don’t expect <a href="../Mail.html">Mail</a> to know how to decode this
data:</p>

<pre class="ruby"><span class="ruby-identifier">file_content</span> = <span class="ruby-constant">SpecialEncode</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-string">'/path/to/filename.jpg'</span>))
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>[<span class="ruby-string">'filename.jpg'</span>] = {:<span class="ruby-identifier">mime_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'application/x-gzip'</span>,
                                    :<span class="ruby-identifier">encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'SpecialEncoding'</span>,
                                    :<span class="ruby-identifier">content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">file_content</span> }
</pre>

<p>You can also search for specific attachments:</p>

<pre class="ruby"><span class="ruby-comment"># By Filename</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>[<span class="ruby-string">'filename.jpg'</span>]   <span class="ruby-comment">#=&gt; Mail::Part object or nil</span>

<span class="ruby-comment"># or by index</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">attachments</span>[<span class="ruby-value">0</span>]                <span class="ruby-comment">#=&gt; Mail::Part (first attachment)</span>
</pre>
          
          

          
          <div class="method-source-code" id="attachments-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1635</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">attachments</span>
  <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">attachments</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-bcc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">bcc</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the Bcc value of the mail object as an array of strings of address
specs.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
</pre>

<p>Additionally, you can append new addresses to the returned Array like
object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">'ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="bcc-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 483</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">bcc</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:bcc</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-bcc-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">bcc=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Bcc value of the mail object, pass in a string of the field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="bcc-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 495</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">bcc=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:bcc</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-bcc_addrs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">bcc_addrs</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array of addresses (the encoded value) in the Bcc field, if no
Bcc field, returns an empty array</p>
          
          

          
          <div class="method-source-code" id="bcc_addrs-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1290</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">bcc_addrs</span>
  <span class="ruby-identifier">bcc</span> <span class="ruby-operator">?</span> [<span class="ruby-identifier">bcc</span>].<span class="ruby-identifier">flatten</span> <span class="ruby-operator">:</span> []
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-body" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">body</span><span
            class="method-args">(value = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the body of the message object. Or, if passed a parameter sets the
value.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Message</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'To: mikel\r\n\r\nThis is the body'</span>)
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> <span class="ruby-comment">#=&gt; #&lt;Mail::Body:0x13919c @raw_source=&quot;This is the bo...</span>

<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> <span class="ruby-string">'This is another body'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> <span class="ruby-comment">#=&gt; #&lt;Mail::Body:0x13919c @raw_source=&quot;This is anothe...</span>
</pre>
          
          

          
          <div class="method-source-code" id="body-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1234</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">body</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword">nil</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">value</span>
<span class="ruby-comment">#        add_encoding_to_body</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">process_body_raw</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@body_raw</span>
        <span class="ruby-ivar">@body</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-body-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">body=</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the body object of the message object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> = <span class="ruby-string">'This is the body'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> <span class="ruby-comment">#=&gt; #&lt;Mail::Body:0x13919c @raw_source=&quot;This is the bo...</span>
</pre>

<p>You can also reset the body of an <a href="Message.html">Message</a> object
by setting body to nil</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> = <span class="ruby-string">'this is the body'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoded</span> <span class="ruby-comment">#=&gt; 'this is the body'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoded</span> <span class="ruby-comment">#=&gt; ''</span>
</pre>

<p>If you try and set the body of an email that is a multipart email, then
instead of deleting all the parts of your email, mail will add a text/plain
part to your email:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">add_file</span> <span class="ruby-string">'somefilename.png'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment">#=&gt; 1</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">body</span> = <span class="ruby-string">&quot;This is a body&quot;</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment">#=&gt; 2</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">content_type</span>.<span class="ruby-identifier">content_type</span> <span class="ruby-comment">#=&gt; 'This is a body'</span>
</pre>
          
          

          
          <div class="method-source-code" id="body-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1220</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">body=</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">body_lazy</span>(<span class="ruby-identifier">value</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-body_encoding" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">body_encoding</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="body_encoding-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1244</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">body_encoding</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoding</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-body_encoding-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">body_encoding=</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="body_encoding-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1252</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">body_encoding=</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-bounced-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">bounced?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="bounced-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1563</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">bounced?</span>
  <span class="ruby-identifier">delivery_status_part</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">delivery_status_part</span>.<span class="ruby-identifier">bounced?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-boundary" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">boundary</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the current boundary for this message part</p>
          
          

          
          <div class="method-source-code" id="boundary-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1592</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">boundary</span>
  <span class="ruby-identifier">content_type_parameters</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">content_type_parameters</span>[<span class="ruby-string">'boundary'</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cc</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the Cc value of the mail object as an array of strings of address
specs.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
</pre>

<p>Additionally, you can append new addresses to the returned Array like
object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">'ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="cc-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 524</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cc</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:cc</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cc-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cc=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Cc value of the mail object, pass in a string of the field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="cc-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 536</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cc=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:cc</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cc_addrs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cc_addrs</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array of addresses (the encoded value) in the Cc field, if no Cc
field, returns an empty array</p>
          
          

          
          <div class="method-source-code" id="cc_addrs-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1284</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cc_addrs</span>
  <span class="ruby-identifier">cc</span> <span class="ruby-operator">?</span> [<span class="ruby-identifier">cc</span>].<span class="ruby-identifier">flatten</span> <span class="ruby-operator">:</span> []
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-charset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">charset</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the character set defined in the content type field</p>
          
          

          
          <div class="method-source-code" id="charset-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1507</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">charset</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@header</span>
    <span class="ruby-identifier">has_content_type?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">content_type_parameters</span>[<span class="ruby-string">'charset'</span>] <span class="ruby-operator">:</span> <span class="ruby-ivar">@charset</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@charset</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-charset-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">charset=</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the charset to the supplied value.</p>
          
          

          
          <div class="method-source-code" id="charset-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1516</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">charset=</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@defaulted_charset</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@charset</span> = <span class="ruby-identifier">value</span>
  <span class="ruby-ivar">@header</span>.<span class="ruby-identifier">charset</span> = <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-comments" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">comments</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="comments-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 540</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">comments</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:comments</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-comments-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">comments=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="comments-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 544</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">comments=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:comments</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_description" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_description</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_description-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 548</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_description</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:content_description</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_description-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_description=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_description-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 552</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_description=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_description</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_disposition" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_disposition</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_disposition-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 556</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_disposition</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:content_disposition</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_disposition-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_disposition=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_disposition-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 560</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_disposition=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_disposition</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_id" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_id</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_id-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 564</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_id</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:content_id</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_id-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_id=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_id-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 568</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_id=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_id</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_location" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_location</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_location-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 572</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_location</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:content_location</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_location-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_location=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_location-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 576</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_location=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_location</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_transfer_encoding" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_transfer_encoding</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_transfer_encoding-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 580</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_transfer_encoding</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:content_transfer_encoding</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_transfer_encoding-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_transfer_encoding=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_transfer_encoding-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 584</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_transfer_encoding=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_transfer_encoding</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_type</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_type-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 588</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_type</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:content_type</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_type-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_type=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_type-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 592</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_type=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_type</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_type_parameters" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_type_parameters</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the content type parameters</p>
          
          

          
          <div class="method-source-code" id="content_type_parameters-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1539</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_type_parameters</span>
  <span class="ruby-identifier">has_content_type?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_type</span>].<span class="ruby-identifier">parameters</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-convert_to_multipart" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">convert_to_multipart</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="convert_to_multipart-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1775</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">convert_to_multipart</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">body</span>.<span class="ruby-identifier">decoded</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span> = <span class="ruby-string">''</span>
  <span class="ruby-identifier">text_part</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Part</span>.<span class="ruby-identifier">new</span>({<span class="ruby-value">:content_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'text/plain;'</span>,
                              <span class="ruby-value">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">text</span>})
  <span class="ruby-identifier">text_part</span>.<span class="ruby-identifier">charset</span> = <span class="ruby-identifier">charset</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@defaulted_charset</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">text_part</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-date" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">date</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="date-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 596</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">date</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:date</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-date-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">date=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="date-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 600</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">date=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:date</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-decode_body" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decode_body</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="decode_body-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1902</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">decode_body</span>
  <span class="ruby-identifier">body</span>.<span class="ruby-identifier">decoded</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-decoded" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decoded</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="decoded-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1881</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">decoded</span>
  <span class="ruby-keyword">case</span>
  <span class="ruby-keyword">when</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">text?</span>
    <span class="ruby-identifier">decode_body_as_text</span>
  <span class="ruby-keyword">when</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">attachment?</span>
    <span class="ruby-identifier">decode_body</span>
  <span class="ruby-keyword">when</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">multipart?</span>
    <span class="ruby-identifier">body</span>.<span class="ruby-identifier">decoded</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-string">'Can not decode an entire message, try calling #decoded on the various fields and body or parts if it is a multipart message.'</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-default" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">default</span><span
            class="method-args">( sym, val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the default value of the field requested as a symbol.</p>

<p>Each header field has a :default method which returns the most common use
case for that field, for example, the date field types will return a
DateTime object when sent :default, the subject, or unstructured fields
will return a decoded string of their value, the address field types will
return a single addr_spec or an array of addr_specs if there is more than
one.</p>
          
          

          
          <div class="method-source-code" id="default-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1187</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">default</span>( <span class="ruby-identifier">sym</span>, <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-identifier">sym</span>] = <span class="ruby-identifier">val</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-identifier">sym</span>].<span class="ruby-identifier">default</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">header</span>[<span class="ruby-identifier">sym</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-deliver" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">deliver</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Delivers an mail object.</p>

<p>Examples:</p>

<pre>mail = Mail.read('file.eml')
mail.deliver</pre>
          
          

          
          <div class="method-source-code" id="deliver-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 228</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">deliver</span>
  <span class="ruby-identifier">inform_interceptors</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">delivery_handler</span>
    <span class="ruby-identifier">delivery_handler</span>.<span class="ruby-identifier">deliver_mail</span>(<span class="ruby-keyword">self</span>) { <span class="ruby-identifier">do_delivery</span> }
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">do_delivery</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">inform_observers</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-deliver-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">deliver!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method bypasses checking <a
href="Message.html#attribute-i-perform_deliveries">#perform_deliveries</a>
and <a
href="Message.html#attribute-i-raise_delivery_errors">#raise_delivery_errors</a>,
so use with caution.</p>

<p>It still however fires off the interceptors and calls the observers
callbacks if they are defined.</p>

<p>Returns self</p>
          
          

          
          <div class="method-source-code" id="deliver-21-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 245</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">deliver!</span>
  <span class="ruby-identifier">inform_interceptors</span>
  <span class="ruby-identifier">response</span> = <span class="ruby-identifier">delivery_method</span>.<span class="ruby-identifier">deliver!</span>(<span class="ruby-keyword">self</span>)
  <span class="ruby-identifier">inform_observers</span>
  <span class="ruby-identifier">delivery_method</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:return_response</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">response</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delivery_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delivery_method</span><span
            class="method-args">(method = nil, settings = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="delivery_method-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 252</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delivery_method</span>(<span class="ruby-identifier">method</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">settings</span> = {})
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">method</span>
    <span class="ruby-ivar">@delivery_method</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@delivery_method</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">lookup_delivery_method</span>(<span class="ruby-identifier">method</span>).<span class="ruby-identifier">new</span>(<span class="ruby-identifier">settings</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delivery_status_part" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delivery_status_part</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>returns the part in a multipart/report email that has the content-type
delivery-status</p>
          
          

          
          <div class="method-source-code" id="delivery_status_part-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1559</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delivery_status_part</span>
  <span class="ruby-ivar">@delivery_stats_part</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">delivery_status_report_part?</span> }.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delivery_status_report-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delivery_status_report?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the message is a multipart/report;
report-type=delivery-status;</p>
          
          

          
          <div class="method-source-code" id="delivery_status_report-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1554</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delivery_status_report?</span>
  <span class="ruby-identifier">multipart_report?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">content_type_parameters</span>[<span class="ruby-string">'report-type'</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^delivery-status$/i</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-destinations" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">destinations</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the list of addresses this message should be sent to by collecting
the addresses off the to, cc and bcc fields.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> = <span class="ruby-string">'mikel@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">cc</span> = <span class="ruby-string">'sam@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">bcc</span> = <span class="ruby-string">'bob@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">destinations</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment">#=&gt; 3</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">destinations</span>.<span class="ruby-identifier">first</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>
          
          

          
          <div class="method-source-code" id="destinations-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1266</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">destinations</span>
  [<span class="ruby-identifier">to_addrs</span>, <span class="ruby-identifier">cc_addrs</span>, <span class="ruby-identifier">bcc_addrs</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">flatten</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-diagnostic_code" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">diagnostic_code</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="diagnostic_code-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1579</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">diagnostic_code</span>
  <span class="ruby-identifier">delivery_status_part</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">delivery_status_part</span>.<span class="ruby-identifier">diagnostic_code</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-encode-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">encode!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="encode-21-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1796</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">encode!</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-string">&quot;Deprecated in 1.1.0 in favour of :ready_to_send! as it is less confusing with encoding and decoding.&quot;</span>)
  <span class="ruby-identifier">ready_to_send!</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-encoded" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">encoded</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Outputs an encoded string representation of the mail message including all
headers, attachments, etc.  This is an encoded email in US-ASCII, so it is
able to be directly sent to an email server.</p>
          
          

          
          <div class="method-source-code" id="encoded-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1804</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">encoded</span>
  <span class="ruby-identifier">ready_to_send!</span>
  <span class="ruby-identifier">buffer</span> = <span class="ruby-identifier">header</span>.<span class="ruby-identifier">encoded</span>
  <span class="ruby-identifier">buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\r\n&quot;</span>
  <span class="ruby-identifier">buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoded</span>(<span class="ruby-identifier">content_transfer_encoding</span>)
  <span class="ruby-identifier">buffer</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-envelope_date" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">envelope_date</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="envelope_date-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 401</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">envelope_date</span>
  <span class="ruby-ivar">@envelope</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@envelope</span>.<span class="ruby-identifier">date</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-envelope_from" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">envelope_from</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="envelope_from-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 397</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">envelope_from</span>
  <span class="ruby-ivar">@envelope</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@envelope</span>.<span class="ruby-identifier">from</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-error_status" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">error_status</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="error_status-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1575</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">error_status</span>
  <span class="ruby-identifier">delivery_status_part</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">delivery_status_part</span>.<span class="ruby-identifier">error_status</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-errors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">errors</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a list of parser errors on the header, each field that had an error
will be reparsed as an unstructured field to preserve the data inside, but
will not be used for further processing.</p>

<p>It returns a nested array of [field_name, value, original_error_message]
per error found.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">message</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Content-Transfer-Encoding: weirdo\r\n&quot;</span>)
<span class="ruby-identifier">message</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment">#=&gt; 1</span>
<span class="ruby-identifier">message</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value">0</span>] <span class="ruby-comment">#=&gt; &quot;Content-Transfer-Encoding&quot;</span>
<span class="ruby-identifier">message</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value">1</span>] <span class="ruby-comment">#=&gt; &quot;weirdo&quot;</span>
<span class="ruby-identifier">message</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value">3</span>] <span class="ruby-comment">#=&gt; &lt;The original error message exception&gt;</span>
</pre>

<p>This is a good first defence on detecting spam by the way.  Some spammers
send invalid emails to try and get email parsers to give up parsing them.</p>
          
          

          
          <div class="method-source-code" id="errors-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 454</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">errors</span>
  <span class="ruby-identifier">header</span>.<span class="ruby-identifier">errors</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-filename" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">filename</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the filename of the attachment</p>
          
          

          
          <div class="method-source-code" id="filename-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1918</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">filename</span>
  <span class="ruby-identifier">find_attachment</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-final_recipient" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">final_recipient</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="final_recipient-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1571</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">final_recipient</span>
  <span class="ruby-identifier">delivery_status_part</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">delivery_status_part</span>.<span class="ruby-identifier">final_recipient</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-find_first_mime_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_first_mime_type</span><span
            class="method-args">(mt)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="find_first_mime_type-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1926</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_first_mime_type</span>(<span class="ruby-identifier">mt</span>)
  <span class="ruby-identifier">all_parts</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">mime_type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">mt</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">p</span>.<span class="ruby-identifier">attachment?</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-from" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the From value of the mail object as an array of strings of address
specs.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
</pre>

<p>Additionally, you can append new addresses to the returned Array like
object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">'ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="from-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 641</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">from</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:from</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-from-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the From value of the mail object, pass in a string of the field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="from-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 653</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">from=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:from</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-from_addrs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_addrs</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array of addresses (the encoded value) in the From field, if no
From field, returns an empty array</p>
          
          

          
          <div class="method-source-code" id="from_addrs-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1272</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">from_addrs</span>
  <span class="ruby-identifier">from</span> <span class="ruby-operator">?</span> [<span class="ruby-identifier">from</span>].<span class="ruby-identifier">flatten</span> <span class="ruby-operator">:</span> []
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_attachments-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_attachments?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="has_attachments-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1639</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_attachments?</span>
  <span class="ruby-operator">!</span><span class="ruby-identifier">attachments</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_charset-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_charset?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="has_charset-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1407</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_charset?</span>
  <span class="ruby-identifier">tmp</span> = <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_type</span>].<span class="ruby-identifier">parameters</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-operator">!</span><span class="ruby-operator">!</span>(<span class="ruby-identifier">has_content_type?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">tmp</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">tmp</span>[<span class="ruby-string">'charset'</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_content_transfer_encoding-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_content_transfer_encoding?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="has_content_transfer_encoding-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1412</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_content_transfer_encoding?</span>
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_transfer_encoding</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_transfer_encoding</span>].<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">blank?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_content_type-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_content_type?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="has_content_type-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1402</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_content_type?</span>
  <span class="ruby-identifier">tmp</span> = <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_type</span>].<span class="ruby-identifier">main_type</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">tmp</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_date-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_date?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the message has a Date field, the field may or may not have
a value, but the field exists or not.</p>
          
          

          
          <div class="method-source-code" id="has_date-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1392</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_date?</span>
  <span class="ruby-identifier">header</span>.<span class="ruby-identifier">has_date?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_message_id-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_message_id?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the message has a message ID field, the field may or may
not have a value, but the field exists or not.</p>
          
          

          
          <div class="method-source-code" id="has_message_id-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1386</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_message_id?</span>
  <span class="ruby-identifier">header</span>.<span class="ruby-identifier">has_message_id?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_mime_version-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_mime_version?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the message has a Mime-Version field, the field may or may
not have a value, but the field exists or not.</p>
          
          

          
          <div class="method-source-code" id="has_mime_version-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1398</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_mime_version?</span>
  <span class="ruby-identifier">header</span>.<span class="ruby-identifier">has_mime_version?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">header</span><span
            class="method-args">(value = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the header object of the message object. Or, if passed a parameter
sets the value.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Message</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'To: mikel\r\nFrom: you'</span>)
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">header</span> <span class="ruby-comment">#=&gt; #&lt;Mail::Header:0x13ce14 @raw_source=&quot;To: mikel\r\nFr...</span>

<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">header</span> <span class="ruby-comment">#=&gt; nil</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">header</span> <span class="ruby-string">'To: mikel\r\nFrom: you'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">header</span> <span class="ruby-comment">#=&gt; #&lt;Mail::Header:0x13ce14 @raw_source=&quot;To: mikel\r\nFr...</span>
</pre>
          
          

          
          <div class="method-source-code" id="header-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 426</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">header</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">value</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">header</span> = <span class="ruby-identifier">value</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@header</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-header-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">header=</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the header of the message object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">header</span> = <span class="ruby-string">'To: mikel@test.lindsaar.net\r\nFrom: Bob@bob.com'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">header</span> <span class="ruby-comment">#=&gt; &lt;#Mail::Header</span>
</pre>
          
          

          
          <div class="method-source-code" id="header-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 411</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">header=</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@header</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Header</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">charset</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-header_fields" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">header_fields</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an <a href="FieldList.html">FieldList</a> of all the fields in the
header in the order that they appear in the header</p>
          
          

          
          <div class="method-source-code" id="header_fields-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1380</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">header_fields</span>
  <span class="ruby-identifier">header</span>.<span class="ruby-identifier">fields</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-headers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">headers</span><span
            class="method-args">(hash = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Provides a way to set custom headers, by passing in a hash</p>
          
          

          
          <div class="method-source-code" id="headers-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 431</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">headers</span>(<span class="ruby-identifier">hash</span> = {})
  <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-html_part" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">html_part</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Accessor for <a href="Message.html#method-i-html_part">#html_part</a></p>
          
          

          
          <div class="method-source-code" id="html_part-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1644</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">html_part</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">html_part</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Part</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:content_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'text/html'</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@html_part</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">find_first_mime_type</span>(<span class="ruby-string">'text/html'</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-html_part-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">html_part=</span><span
            class="method-args">(msg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Helper to add a html part to a multipart/alternative email.  If this and <a
href="Message.html#method-i-text_part">#text_part</a> are both defined in a
message, then it will be a multipart/alternative message and set itself
that way.</p>
          
          

          
          <div class="method-source-code" id="html_part-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1664</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">html_part=</span>(<span class="ruby-identifier">msg</span>)
  <span class="ruby-comment"># Assign the html part and set multipart/alternative if there's a text part.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">msg</span>
    <span class="ruby-ivar">@html_part</span> = <span class="ruby-identifier">msg</span>
    <span class="ruby-ivar">@html_part</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-string">'text/html'</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@html_part</span>.<span class="ruby-identifier">has_content_type?</span>
    <span class="ruby-identifier">add_multipart_alternate_header</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text_part</span>
    <span class="ruby-identifier">add_part</span> <span class="ruby-ivar">@html_part</span>

  <span class="ruby-comment"># If nil, delete the html part and back out of multipart/alternative.</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@html_part</span>
    <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">object_id</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@html_part</span>.<span class="ruby-identifier">object_id</span> }
    <span class="ruby-ivar">@html_part</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">text_part</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">body</span>.<span class="ruby-identifier">boundary</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-in_reply_to" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">in_reply_to</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="in_reply_to-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 657</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">in_reply_to</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:in_reply_to</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-in_reply_to-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">in_reply_to=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="in_reply_to-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 661</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">in_reply_to=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:in_reply_to</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inform_interceptors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inform_interceptors</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="inform_interceptors-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inform_interceptors</span>
  <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">inform_interceptors</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inform_observers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inform_observers</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="inform_observers-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 214</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inform_observers</span>
  <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">inform_observers</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-initialize_copy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">initialize_copy</span><span
            class="method-args">(original)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="initialize_copy-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 367</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">original</span>)
  <span class="ruby-keyword">super</span>
  <span class="ruby-ivar">@header</span> = <span class="ruby-ivar">@header</span>.<span class="ruby-identifier">dup</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inspect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inspect</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="inspect-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1877</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect</span>
  <span class="ruby-node">&quot;#&lt;#{self.class}:#{self.object_id}, Multipart: #{multipart?}, Headers: #{header.field_summary}&gt;&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-is_marked_for_delete-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_marked_for_delete?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns whether message will be marked for deletion. If so, the message
will be deleted at session close (i.e. after find exits), but only if also
using the find_and_delete method, or by calling find with
:delete_after_find set to true.</p>

<p>Side-note: Just to be clear, this method will return true even if the
message hasn’t yet been marked for delete on the mail server. However, if
this method returns true, it *will be* marked on the server after each
block yields back to find or find_and_delete.</p>
          
          

          
          <div class="method-source-code" id="is_marked_for_delete-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1955</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_marked_for_delete?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@mark_for_delete</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-keywords" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">keywords</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="keywords-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 665</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">keywords</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:keywords</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-keywords-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">keywords=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="keywords-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 669</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">keywords=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:keywords</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-main_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">main_type</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the main content type</p>
          
          

          
          <div class="method-source-code" id="main_type-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1523</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">main_type</span>
  <span class="ruby-identifier">has_content_type?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_type</span>].<span class="ruby-identifier">main_type</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-mark_for_delete-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mark_for_delete=</span><span
            class="method-args">(value = true)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets whether this message should be deleted at session close (i.e. after
find). <a href="Message.html">Message</a> will only be deleted if messages
are retrieved using the find_and_delete method, or by calling find with
:delete_after_find set to true.</p>
          
          

          
          <div class="method-source-code" id="mark_for_delete-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1942</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mark_for_delete=</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-ivar">@mark_for_delete</span> = <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-message_content_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">message_content_type</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="message_content_type-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1501</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">message_content_type</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-node">&quot;:message_content_type is deprecated in Mail 1.4.3.  Please use mime_type\n#{caller}&quot;</span>)
  <span class="ruby-identifier">mime_type</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-message_id" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">message_id</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the Message-ID of the mail object.  Note, per RFC 2822 the <a
href="Message.html">Message</a> ID consists of what is INSIDE the &lt; &gt;
usually seen in the mail header, so this method will return only what is
inside.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;1234@message.id&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">message_id</span> <span class="ruby-comment">#=&gt; '1234@message.id'</span>
</pre>

<p>Also allows you to set the Message-ID by passing a string as a parameter</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">message_id</span> <span class="ruby-string">'&lt;1234@message.id&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">message_id</span> <span class="ruby-comment">#=&gt; '1234@message.id'</span>
</pre>
          
          

          
          <div class="method-source-code" id="message_id-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 686</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">message_id</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:message_id</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-message_id-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">message_id=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Message-ID. Note, per RFC 2822 the <a
href="Message.html">Message</a> ID consists of what is INSIDE the &lt; &gt;
usually seen in the mail header, so this method will return only what is
inside.</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">message_id</span> = <span class="ruby-string">'&lt;1234@message.id&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">message_id</span> <span class="ruby-comment">#=&gt; '1234@message.id'</span>
</pre>
          
          

          
          <div class="method-source-code" id="message_id-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 695</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">message_id=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:message_id</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-method_missing" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">method_missing</span><span
            class="method-args">(name, *args, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Method Missing in this implementation allows you to set any of the standard
fields directly as you would the “to”, “subject” etc.</p>

<p>Those fields used most often (to, subject et al) are given their own method
for ease of documentation and also to avoid the hook call to method
missing.</p>

<p>This will only catch the known fields listed in:</p>

<pre>Mail::Field::KNOWN_FIELDS</pre>

<p>as per RFC 2822, any ruby string or method name could pretty much be a
field name, so we don’t want to just catch ANYTHING sent to a message
object and interpret it as a header.</p>

<p>This method provides all three types of header call to set, read and
explicitly set with the = operator</p>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">comments</span> = <span class="ruby-string">'These are some comments'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">comments</span> <span class="ruby-comment">#=&gt; 'These are some comments'</span>

<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">comments</span> <span class="ruby-string">'These are other comments'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">comments</span> <span class="ruby-comment">#=&gt; 'These are other comments'</span>

<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">date</span> = <span class="ruby-string">'Tue, 1 Jul 2003 10:52:37 +0200'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">date</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment">#=&gt; 'Tue, 1 Jul 2003 10:52:37 +0200'</span>

<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">date</span> <span class="ruby-string">'Tue, 1 Jul 2003 10:52:37 +0200'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">date</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-comment">#=&gt; 'Tue, 1 Jul 2003 10:52:37 +0200'</span>

<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_msg_id</span> = <span class="ruby-string">'&lt;1234@resent_msg_id.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_msg_id</span> <span class="ruby-comment">#=&gt; '&lt;1234@resent_msg_id.lindsaar.net&gt;'</span>

<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_msg_id</span> <span class="ruby-string">'&lt;4567@resent_msg_id.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_msg_id</span> <span class="ruby-comment">#=&gt; '&lt;4567@resent_msg_id.lindsaar.net&gt;'</span>
</pre>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="method_missing-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1361</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-comment">#:nodoc:</span>
  <span class="ruby-comment"># Only take the structured fields, as we could take _anything_ really</span>
  <span class="ruby-comment"># as it could become an optional field... &quot;but therin lies the dark side&quot;</span>
  <span class="ruby-identifier">field_name</span> = <span class="ruby-identifier">underscoreize</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">chomp</span>(<span class="ruby-string">&quot;=&quot;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Field</span><span class="ruby-operator">::</span><span class="ruby-constant">KNOWN_FIELDS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">field_name</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">header</span>[<span class="ruby-identifier">field_name</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">header</span>[<span class="ruby-identifier">field_name</span>] = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span> <span class="ruby-comment"># otherwise pass it on</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#:startdoc:</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-mime_parameters" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mime_parameters</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the content type parameters</p>
          
          

          
          <div class="method-source-code" id="mime_parameters-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1533</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mime_parameters</span>
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-string">':mime_parameters is deprecated in Mail 1.4.3, please use :content_type_parameters instead'</span>)
  <span class="ruby-identifier">content_type_parameters</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-mime_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mime_type</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the MIME media type of part we are on, this is taken from the
content-type header</p>
          
          

          
          <div class="method-source-code" id="mime_type-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1497</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mime_type</span>
  <span class="ruby-identifier">has_content_type?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_type</span>].<span class="ruby-identifier">string</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-mime_version" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mime_version</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the MIME version of the email as a string</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span> = <span class="ruby-string">'1.0'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span> <span class="ruby-comment">#=&gt; '1.0'</span>
</pre>

<p>Also allows you to set the MIME version by passing a string as a parameter.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span> <span class="ruby-string">'1.0'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span> <span class="ruby-comment">#=&gt; '1.0'</span>
</pre>
          
          

          
          <div class="method-source-code" id="mime_version-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 712</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mime_version</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:mime_version</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-mime_version-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mime_version=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the MIME version of the email by accepting a string</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span> = <span class="ruby-string">'1.0'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">mime_version</span> <span class="ruby-comment">#=&gt; '1.0'</span>
</pre>
          
          

          
          <div class="method-source-code" id="mime_version-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 722</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mime_version=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:mime_version</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-multipart-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">multipart?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the message is multipart</p>
          
          

          
          <div class="method-source-code" id="multipart-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1544</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">multipart?</span>
  <span class="ruby-identifier">has_content_type?</span> <span class="ruby-operator">?</span> <span class="ruby-operator">!</span><span class="ruby-operator">!</span>(<span class="ruby-identifier">main_type</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^multipart$/i</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-multipart_report-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">multipart_report?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the message is a multipart/report</p>
          
          

          
          <div class="method-source-code" id="multipart_report-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1549</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">multipart_report?</span>
  <span class="ruby-identifier">multipart?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">sub_type</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^report$/i</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-part" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">part</span><span
            class="method-args">(params = {}) { |new_part| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allows you to add a part in block form to an existing mail message object</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">part</span> :<span class="ruby-identifier">content_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;multipart/alternative&quot;</span>, :<span class="ruby-identifier">content_disposition</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;inline&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">p</span>.<span class="ruby-identifier">part</span> :<span class="ruby-identifier">content_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;text/plain&quot;</span>, :<span class="ruby-identifier">body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;test text\nline #2&quot;</span>
    <span class="ruby-identifier">p</span>.<span class="ruby-identifier">part</span> :<span class="ruby-identifier">content_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;text/html&quot;</span>, :<span class="ruby-identifier">body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;&lt;b&gt;test&lt;/b&gt; HTML&lt;br/&gt;\nline #2&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
          
          

          
          <div class="method-source-code" id="part-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1727</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">part</span>(<span class="ruby-identifier">params</span> = {})
  <span class="ruby-identifier">new_part</span> = <span class="ruby-constant">Part</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">new_part</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">add_part</span>(<span class="ruby-identifier">new_part</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-parts" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parts</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a parts list object of all the parts in the message</p>
          
          

          
          <div class="method-source-code" id="parts-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1597</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parts</span>
  <span class="ruby-identifier">body</span>.<span class="ruby-identifier">parts</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-raw_envelope" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">raw_envelope</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The <a href="Message.html#method-i-raw_envelope">#raw_envelope</a> is the
From mikel@test.lindsaar.net Mon May  2 16:07:05 2009 type field that you
can see at the top of any email that has come from a mailbox</p>
          
          

          
          <div class="method-source-code" id="raw_envelope-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 393</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">raw_envelope</span>
  <span class="ruby-ivar">@raw_envelope</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-raw_source" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">raw_source</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Provides access to the raw source of the message as it was when it was
instantiated. This is set at initialization and so is untouched by the
parsers or decoder / encoders</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'This is an invalid email message'</span>)
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">raw_source</span> <span class="ruby-comment">#=&gt; &quot;This is an invalid email message&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="raw_source-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 380</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">raw_source</span>
  <span class="ruby-ivar">@raw_source</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-read" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">read</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="read-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1894</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">read</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">attachment?</span>
    <span class="ruby-identifier">decode_body</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-string">'Can not call read on a part unless it is an attachment.'</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-ready_to_send-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ready_to_send!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Encodes the message, calls encode on all its parts, gets an email message
ready to send</p>
          
          

          
          <div class="method-source-code" id="ready_to_send-21-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1786</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ready_to_send!</span>
  <span class="ruby-identifier">identify_and_set_transfer_encoding</span>
  <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">sort!</span>([ <span class="ruby-string">&quot;text/plain&quot;</span>, <span class="ruby-string">&quot;text/enriched&quot;</span>, <span class="ruby-string">&quot;text/html&quot;</span>, <span class="ruby-string">&quot;multipart/alternative&quot;</span> ])
  <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">part</span>.<span class="ruby-identifier">transport_encoding</span> = <span class="ruby-identifier">transport_encoding</span>
    <span class="ruby-identifier">part</span>.<span class="ruby-identifier">ready_to_send!</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">add_required_fields</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-received" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">received</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="received-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 726</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">received</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-value">:received</span>] = <span class="ruby-identifier">val</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-value">:received</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-received-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">received=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="received-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 734</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">received=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:received</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-references" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">references</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="references-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 738</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">references</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:references</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-references-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">references=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="references-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 742</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">references=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:references</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-register_for_delivery_notification" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">register_for_delivery_notification</span><span
            class="method-args">(observer)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="register_for_delivery_notification-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 209</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">register_for_delivery_notification</span>(<span class="ruby-identifier">observer</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-node">&quot;Message#register_for_delivery_notification is deprecated, please call Mail.register_observer instead&quot;</span>)
  <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">register_observer</span>(<span class="ruby-identifier">observer</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remote_mta" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remote_mta</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remote_mta-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1583</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remote_mta</span>
  <span class="ruby-identifier">delivery_status_part</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">delivery_status_part</span>.<span class="ruby-identifier">remote_mta</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reply" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reply</span><span
            class="method-args">(*args, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="reply-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 260</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reply</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">reply</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">message_id</span>
      <span class="ruby-identifier">bracketed_message_id</span> = <span class="ruby-node">&quot;&lt;#{message_id}&gt;&quot;</span>
      <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">in_reply_to</span> = <span class="ruby-identifier">bracketed_message_id</span>
      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">references</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-identifier">refs</span> = [<span class="ruby-identifier">references</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;&lt;#{r}&gt;&quot;</span> }
        <span class="ruby-identifier">refs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">bracketed_message_id</span>
        <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">references</span> = <span class="ruby-identifier">refs</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">' '</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">in_reply_to</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">in_reply_to</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>)
        <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">references</span> = <span class="ruby-node">&quot;&lt;#{in_reply_to}&gt; #{bracketed_message_id}&quot;</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">references</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">bracketed_message_id</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">subject</span>
      <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-identifier">subject</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^Re:/i</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">subject</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;RE: #{subject}&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">reply_to</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">from</span>
      <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">to</span> = <span class="ruby-keyword">self</span>[<span class="ruby-identifier">reply_to</span> <span class="ruby-operator">?</span> <span class="ruby-value">:reply_to</span> <span class="ruby-operator">:</span> <span class="ruby-value">:from</span>].<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">to</span>
      <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">from</span> = <span class="ruby-keyword">self</span>[<span class="ruby-value">:to</span>].<span class="ruby-identifier">formatted</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:each_pair</span>)
        <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:init_with_hash</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">first</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:init_with_string</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">flatten</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
      <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reply_to" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reply_to</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the Reply-To value of the mail object as an array of strings of
address specs.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
</pre>

<p>Additionally, you can append new addresses to the returned Array like
object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">'ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="reply_to-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 771</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reply_to</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:reply_to</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reply_to-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reply_to=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Reply-To value of the mail object, pass in a string of the field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">reply_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="reply_to-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 783</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reply_to=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:reply_to</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_bcc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_bcc</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the Resent-Bcc value of the mail object as an array of strings of
address specs.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
</pre>

<p>Additionally, you can append new addresses to the returned Array like
object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">'ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="resent_bcc-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 812</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_bcc</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:resent_bcc</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_bcc-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_bcc=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Resent-Bcc value of the mail object, pass in a string of the field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_bcc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="resent_bcc-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 824</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_bcc=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:resent_bcc</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_cc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_cc</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the Resent-Cc value of the mail object as an array of strings of
address specs.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
</pre>

<p>Additionally, you can append new addresses to the returned Array like
object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">'ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="resent_cc-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 853</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_cc</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:resent_cc</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_cc-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_cc=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Resent-Cc value of the mail object, pass in a string of the field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_cc</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="resent_cc-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 865</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_cc=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:resent_cc</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_date" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_date</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="resent_date-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 869</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_date</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:resent_date</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_date-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_date=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="resent_date-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 873</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_date=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:resent_date</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_from" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_from</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the Resent-From value of the mail object as an array of strings of
address specs.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> [<span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>]
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>

<p>Additionally, you can append new addresses to the returned Array like
object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">'ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="resent_from-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 902</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_from</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:resent_from</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_from-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_from=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Resent-From value of the mail object, pass in a string of the
field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_from</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="resent_from-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 914</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_from=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:resent_from</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_message_id" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_message_id</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="resent_message_id-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 918</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_message_id</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:resent_message_id</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_message_id-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_message_id=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="resent_message_id-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 922</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_message_id=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:resent_message_id</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_sender" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_sender</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the Resent-Sender value of the mail object, as a single string of
an address spec.  A sender per RFC 2822 must be a single address, so you
can not append to this address.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_sender</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_sender</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_sender</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_sender</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>
          
          

          
          <div class="method-source-code" id="resent_sender-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 941</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_sender</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:resent_sender</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_sender-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_sender=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Resent-Sender value of the mail object, pass in a string of the
field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_sender</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_sender</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>
          
          

          
          <div class="method-source-code" id="resent_sender-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 951</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_sender=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:resent_sender</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_to" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_to</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the Resent-To value of the mail object as an array of strings of
address specs.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
</pre>

<p>Additionally, you can append new addresses to the returned Array like
object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">'ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="resent_to-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 980</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_to</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:resent_to</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resent_to-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resent_to=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Resent-To value of the mail object, pass in a string of the field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">resent_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="resent_to-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 992</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resent_to=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:resent_to</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-retryable-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">retryable?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="retryable-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1587</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">retryable?</span>
  <span class="ruby-identifier">delivery_status_part</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">delivery_status_part</span>.<span class="ruby-identifier">retryable?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-return_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">return_path</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the return path of the mail object, or sets it if you pass a string</p>
          
          

          
          <div class="method-source-code" id="return_path-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 997</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">return_path</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:return_path</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-return_path-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">return_path=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the return path of the object</p>
          
          

          
          <div class="method-source-code" id="return_path-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1002</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">return_path=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:return_path</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sender" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sender</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the Sender value of the mail object, as a single string of an
address spec.  A sender per RFC 2822 must be a single address.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">sender</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">sender</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">sender</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">sender</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>
          
          

          
          <div class="method-source-code" id="sender-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1020</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sender</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:sender</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sender-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sender=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Sender value of the mail object, pass in a string of the field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">sender</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">sender</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>
          
          

          
          <div class="method-source-code" id="sender-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1030</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sender=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:sender</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-set_envelope" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_envelope</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the envelope from for the email</p>
          
          

          
          <div class="method-source-code" id="set_envelope-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 385</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_envelope</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-ivar">@raw_envelope</span> = <span class="ruby-identifier">val</span>
  <span class="ruby-ivar">@envelope</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Envelope</span>.<span class="ruby-identifier">new</span>( <span class="ruby-identifier">val</span> )
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-skip_deletion" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">skip_deletion</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Skips the deletion of this message. All other messages flagged for delete
still will be deleted at session close (i.e. when find exits). Only has an
effect if you’re using find_and_delete or find with :delete_after_find set
to true.</p>
          
          

          
          <div class="method-source-code" id="skip_deletion-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1934</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">skip_deletion</span>
  <span class="ruby-ivar">@mark_for_delete</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-smtp_envelope_from" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">smtp_envelope_from</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the <a href="SMTP.html">SMTP</a> <a
href="Envelope.html">Envelope</a> From value of the mail object, as a
single string of an address spec.</p>

<p>Defaults to Return-Path, Sender, or the first From address.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_from</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_from</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_from</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_from</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>
          
          

          
          <div class="method-source-code" id="smtp_envelope_from-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1050</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">smtp_envelope_from</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">smtp_envelope_from</span> = <span class="ruby-identifier">val</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@smtp_envelope_from</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">return_path</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">sender</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">from_addrs</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-smtp_envelope_from-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">smtp_envelope_from=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the From address on the <a href="SMTP.html">SMTP</a> <a
href="Envelope.html">Envelope</a>.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_from</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_from</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>
          
          

          
          <div class="method-source-code" id="smtp_envelope_from-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1064</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">smtp_envelope_from=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-ivar">@smtp_envelope_from</span> = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-smtp_envelope_to" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">smtp_envelope_to</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the <a href="SMTP.html">SMTP</a> <a
href="Envelope.html">Envelope</a> To value of the mail object.</p>

<p>Defaults to <a href="Message.html#method-i-destinations">destinations</a>:
To, Cc, and Bcc addresses.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_to</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_to</span> [<span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>, <span class="ruby-string">'Lindsaar &lt;lindsaar@test.lindsaar.net&gt;'</span>]
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'lindsaar@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="smtp_envelope_to-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1083</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">smtp_envelope_to</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">smtp_envelope_to</span> = <span class="ruby-identifier">val</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@smtp_envelope_to</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">destinations</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-smtp_envelope_to-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">smtp_envelope_to=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the To addresses on the <a href="SMTP.html">SMTP</a> <a
href="Envelope.html">Envelope</a>.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_to</span> <span class="ruby-comment">#=&gt; 'mikel@test.lindsaar.net'</span>

<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_to</span> = [<span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>, <span class="ruby-string">'Lindsaar &lt;lindsaar@test.lindsaar.net&gt;'</span>]
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">smtp_envelope_to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'lindsaar@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="smtp_envelope_to-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1100</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">smtp_envelope_to=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-ivar">@smtp_envelope_to</span> =
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">val</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>, <span class="ruby-constant">NilClass</span>
      <span class="ruby-identifier">val</span>
    <span class="ruby-keyword">else</span>
      [<span class="ruby-identifier">val</span>]
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sub_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sub_type</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the sub content type</p>
          
          

          
          <div class="method-source-code" id="sub_type-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1528</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sub_type</span>
  <span class="ruby-identifier">has_content_type?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_type</span>].<span class="ruby-identifier">sub_type</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-subject" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">subject</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the decoded value of the subject field, as a single string.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">&quot;G'Day mate&quot;</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span> <span class="ruby-comment">#=&gt; &quot;G'Day mate&quot;</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">'=?UTF-8?Q?This_is_=E3=81=82_string?='</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span> <span class="ruby-comment">#=&gt; &quot;This is あ string&quot;</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span> <span class="ruby-string">&quot;G'Day mate&quot;</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span> <span class="ruby-comment">#=&gt; &quot;G'Day mate&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="subject-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1125</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">subject</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:subject</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-subject-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">subject=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the Subject value of the mail object, pass in a string of the field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span> = <span class="ruby-string">'=?UTF-8?Q?This_is_=E3=81=82_string?='</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">subject</span> <span class="ruby-comment">#=&gt; &quot;This is あ string&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="subject-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1135</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">subject=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:subject</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-text-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">text?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="text-3F-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1959</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">text?</span>
  <span class="ruby-identifier">has_content_type?</span> <span class="ruby-operator">?</span> <span class="ruby-operator">!</span><span class="ruby-operator">!</span>(<span class="ruby-identifier">main_type</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^text$/i</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-text_part" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">text_part</span><span
            class="method-args">(&block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Accessor for <a href="Message.html#method-i-text_part">#text_part</a></p>
          
          

          
          <div class="method-source-code" id="text_part-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1653</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">text_part</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">text_part</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Part</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:content_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'text/plain'</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@text_part</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">find_first_mime_type</span>(<span class="ruby-string">'text/plain'</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-text_part-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">text_part=</span><span
            class="method-args">(msg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Helper to add a text part to a multipart/alternative email.  If this and <a
href="Message.html#method-i-html_part">#html_part</a> are both defined in a
message, then it will be a multipart/alternative message and set itself
that way.</p>
          
          

          
          <div class="method-source-code" id="text_part-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1686</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">text_part=</span>(<span class="ruby-identifier">msg</span>)
  <span class="ruby-comment"># Assign the text part and set multipart/alternative if there's an html part.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">msg</span>
    <span class="ruby-ivar">@text_part</span> = <span class="ruby-identifier">msg</span>
    <span class="ruby-ivar">@text_part</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-string">'text/plain'</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@text_part</span>.<span class="ruby-identifier">has_content_type?</span>
    <span class="ruby-identifier">add_multipart_alternate_header</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">html_part</span>
    <span class="ruby-identifier">add_part</span> <span class="ruby-ivar">@text_part</span>

  <span class="ruby-comment"># If nil, delete the text part and back out of multipart/alternative.</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@text_part</span>
    <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">object_id</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@text_part</span>.<span class="ruby-identifier">object_id</span> }
    <span class="ruby-ivar">@text_part</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">html_part</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">body</span>.<span class="ruby-identifier">boundary</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to</span><span
            class="method-args">( val = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the To value of the mail object as an array of strings of address
specs.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>

<p>Also allows you to set the value by passing a value as a parameter</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
</pre>

<p>Additionally, you can append new addresses to the returned Array like
object.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">'ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="to-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1164</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">default</span> <span class="ruby-value">:to</span>, <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the To value of the mail object, pass in a string of the field</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net']</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> = <span class="ruby-string">'Mikel &lt;mikel@test.lindsaar.net&gt;, ada@test.lindsaar.net'</span>
<span class="ruby-identifier">mail</span>.<span class="ruby-identifier">to</span> <span class="ruby-comment">#=&gt; ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']</span>
</pre>
          
          

          
          <div class="method-source-code" id="to-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1176</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-identifier">header</span>[<span class="ruby-value">:to</span>] = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_addrs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_addrs</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array of addresses (the encoded value) in the To field, if no To
field, returns an empty array</p>
          
          

          
          <div class="method-source-code" id="to_addrs-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1278</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_addrs</span>
  <span class="ruby-identifier">to</span> <span class="ruby-operator">?</span> [<span class="ruby-identifier">to</span>].<span class="ruby-identifier">flatten</span> <span class="ruby-operator">:</span> []
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1873</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">encoded</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_yaml" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_yaml</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="to_yaml-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1827</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_yaml</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">hash</span> = {}
  <span class="ruby-identifier">hash</span>[<span class="ruby-string">'headers'</span>] = {}
  <span class="ruby-identifier">header</span>.<span class="ruby-identifier">fields</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">hash</span>[<span class="ruby-string">'headers'</span>][<span class="ruby-identifier">field</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">field</span>.<span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">hash</span>[<span class="ruby-string">'delivery_handler'</span>] = <span class="ruby-identifier">delivery_handler</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">delivery_handler</span>
  <span class="ruby-identifier">hash</span>[<span class="ruby-string">'transport_encoding'</span>] = <span class="ruby-identifier">transport_encoding</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">special_variables</span> = [<span class="ruby-value">:@header</span>, <span class="ruby-value">:@delivery_handler</span>, <span class="ruby-value">:@transport_encoding</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">multipart?</span>
    <span class="ruby-identifier">hash</span>[<span class="ruby-string">'multipart_body'</span>] = []
    <span class="ruby-identifier">body</span>.<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span> <span class="ruby-identifier">hash</span>[<span class="ruby-string">'multipart_body'</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">part</span>.<span class="ruby-identifier">to_yaml</span> }
    <span class="ruby-identifier">special_variables</span>.<span class="ruby-identifier">push</span>(<span class="ruby-value">:@body</span>, <span class="ruby-value">:@text_part</span>, <span class="ruby-value">:@html_part</span>)
  <span class="ruby-keyword">end</span>
  (<span class="ruby-identifier">instance_variables</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:to_sym</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">special_variables</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">var</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">var</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-identifier">var</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">to_yaml</span>(<span class="ruby-identifier">opts</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-transport_encoding" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transport_encoding</span><span
            class="method-args">( val = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="transport_encoding-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 604</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">transport_encoding</span>( <span class="ruby-identifier">val</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">transport_encoding</span> = <span class="ruby-identifier">val</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@transport_encoding</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-transport_encoding-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transport_encoding=</span><span
            class="method-args">( val )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="transport_encoding-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 612</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">transport_encoding=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-ivar">@transport_encoding</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Encodings</span>.<span class="ruby-identifier">get_encoding</span>(<span class="ruby-identifier">val</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-without_attachments-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">without_attachments!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="without_attachments-21-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1812</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">without_attachments!</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">has_attachments?</span>

  <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">attachment?</span> }
  <span class="ruby-identifier">body_raw</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">empty?</span>
               <span class="ruby-string">''</span>
             <span class="ruby-keyword">else</span>
               <span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoded</span>
             <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@body</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Body</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">body_raw</span>)

  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-add_boundary" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_boundary</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_boundary-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2059</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_boundary</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">boundary</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">boundary</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-string">'content-type'</span>] = <span class="ruby-string">'multipart/mixed'</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">header</span>[<span class="ruby-string">'content-type'</span>]
    <span class="ruby-identifier">header</span>[<span class="ruby-string">'content-type'</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-value">:boundary</span>] = <span class="ruby-constant">ContentTypeField</span>.<span class="ruby-identifier">generate_boundary</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-string">'content_type'</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-value">:charset</span>] = <span class="ruby-ivar">@charset</span>
    <span class="ruby-identifier">body</span>.<span class="ruby-identifier">boundary</span> = <span class="ruby-identifier">boundary</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_encoding_to_body" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_encoding_to_body</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_encoding_to_body-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2025</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_encoding_to_body</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">has_content_transfer_encoding?</span>
    <span class="ruby-ivar">@body</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">content_transfer_encoding</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_multipart_alternate_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_multipart_alternate_header</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_multipart_alternate_header-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2053</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_multipart_alternate_header</span>
  <span class="ruby-identifier">header</span>[<span class="ruby-string">'content-type'</span>] = <span class="ruby-constant">ContentTypeField</span>.<span class="ruby-identifier">with_boundary</span>(<span class="ruby-string">'multipart/alternative'</span>).<span class="ruby-identifier">value</span>
  <span class="ruby-identifier">header</span>[<span class="ruby-string">'content_type'</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-value">:charset</span>] = <span class="ruby-ivar">@charset</span>
  <span class="ruby-identifier">body</span>.<span class="ruby-identifier">boundary</span> = <span class="ruby-identifier">boundary</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_multipart_mixed_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_multipart_mixed_header</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_multipart_mixed_header-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2068</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_multipart_mixed_header</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">header</span>[<span class="ruby-string">'content-type'</span>]
    <span class="ruby-identifier">header</span>[<span class="ruby-string">'content-type'</span>] = <span class="ruby-constant">ContentTypeField</span>.<span class="ruby-identifier">with_boundary</span>(<span class="ruby-string">'multipart/mixed'</span>).<span class="ruby-identifier">value</span>
    <span class="ruby-identifier">header</span>[<span class="ruby-string">'content_type'</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-value">:charset</span>] = <span class="ruby-ivar">@charset</span>
    <span class="ruby-identifier">body</span>.<span class="ruby-identifier">boundary</span> = <span class="ruby-identifier">boundary</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_required_fields" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_required_fields</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_required_fields-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2039</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_required_fields</span>
  <span class="ruby-identifier">add_required_message_fields</span>
  <span class="ruby-identifier">add_multipart_mixed_header</span>    <span class="ruby-keyword">if</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">multipart?</span>
  <span class="ruby-identifier">add_content_type</span>              <span class="ruby-keyword">unless</span> <span class="ruby-identifier">has_content_type?</span>
  <span class="ruby-identifier">add_charset</span>                   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">has_charset?</span>
  <span class="ruby-identifier">add_content_transfer_encoding</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">has_content_transfer_encoding?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_required_message_fields" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_required_message_fields</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_required_message_fields-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2047</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_required_message_fields</span>
  <span class="ruby-identifier">add_date</span>          <span class="ruby-keyword">unless</span> <span class="ruby-identifier">has_date?</span>
  <span class="ruby-identifier">add_mime_version</span>  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">has_mime_version?</span>
  <span class="ruby-identifier">add_message_id</span>    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">has_message_id?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-body_lazy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">body_lazy</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>see comments to body=. We take data and process it lazily</p>
          
          

          
          <div class="method-source-code" id="body_lazy-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1988</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">body_lazy</span>(<span class="ruby-identifier">value</span>)
      <span class="ruby-identifier">process_body_raw</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@body_raw</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">case</span>
      <span class="ruby-keyword">when</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">&lt;=</span><span class="ruby-value">0</span>
        <span class="ruby-ivar">@body</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Body</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">''</span>)
        <span class="ruby-ivar">@body_raw</span> = <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">add_encoding_to_body</span>
      <span class="ruby-keyword">when</span> <span class="ruby-ivar">@body</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@body</span>.<span class="ruby-identifier">multipart?</span>
        <span class="ruby-ivar">@body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Part</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>)
        <span class="ruby-identifier">add_encoding_to_body</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-ivar">@body_raw</span> = <span class="ruby-identifier">value</span>
<span class="ruby-comment">#        process_body_raw</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-decode_body_as_text" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decode_body_as_text</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="decode_body_as_text-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2142</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">decode_body_as_text</span>
  <span class="ruby-identifier">body_text</span> = <span class="ruby-identifier">decode_body</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">charset</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">&lt;</span> <span class="ruby-string">'1.9'</span>
      <span class="ruby-identifier">require</span> <span class="ruby-string">'iconv'</span>
      <span class="ruby-keyword">return</span> <span class="ruby-constant">Iconv</span>.<span class="ruby-identifier">conv</span>(<span class="ruby-string">&quot;UTF-8//TRANSLIT//IGNORE&quot;</span>, <span class="ruby-identifier">charset</span>, <span class="ruby-identifier">body_text</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">encoding</span> = <span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">charset</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">body_text</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-identifier">encoding</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">body_text</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>, <span class="ruby-value">:undef</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:replace</span>, <span class="ruby-value">:invalid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:replace</span>, <span class="ruby-value">:replace</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">''</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">body_text</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-do_delivery" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">do_delivery</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="do_delivery-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">do_delivery</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">perform_deliveries</span>
      <span class="ruby-identifier">delivery_method</span>.<span class="ruby-identifier">deliver!</span>(<span class="ruby-keyword">self</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span> <span class="ruby-comment"># Net::SMTP errors or sendmail pipe errors</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">raise_delivery_errors</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-find_attachment" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_attachment</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the filename of the attachment (if it exists) or returns nil</p>
          
          

          
          <div class="method-source-code" id="find_attachment-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2114</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_attachment</span>
  <span class="ruby-identifier">content_type_name</span> = <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_type</span>].<span class="ruby-identifier">filename</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">content_disp_name</span> = <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_disposition</span>].<span class="ruby-identifier">filename</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">content_loc_name</span>  = <span class="ruby-identifier">header</span>[<span class="ruby-value">:content_location</span>].<span class="ruby-identifier">location</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">case</span>
  <span class="ruby-keyword">when</span> <span class="ruby-identifier">content_type</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">content_type_name</span>
    <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">content_type_name</span>
  <span class="ruby-keyword">when</span> <span class="ruby-identifier">content_disposition</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">content_disp_name</span>
    <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">content_disp_name</span>
  <span class="ruby-keyword">when</span> <span class="ruby-identifier">content_location</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">content_loc_name</span>
    <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">content_loc_name</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">filename</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">filename</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Encodings</span>.<span class="ruby-identifier">decode_encode</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-value">:decode</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">filename</span> <span class="ruby-keyword">rescue</span> <span class="ruby-identifier">filename</span>
  <span class="ruby-identifier">filename</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-identify_and_set_transfer_encoding" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">identify_and_set_transfer_encoding</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="identify_and_set_transfer_encoding-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2031</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">identify_and_set_transfer_encoding</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">body</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">multipart?</span>
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">content_transfer_encoding</span> = <span class="ruby-ivar">@transport_encoding</span>
    <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">content_transfer_encoding</span> = <span class="ruby-identifier">body</span>.<span class="ruby-identifier">get_best_encoding</span>(<span class="ruby-ivar">@transport_encoding</span>)
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-init_with_hash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init_with_hash</span><span
            class="method-args">(hash)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="init_with_hash-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2076</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_with_hash</span>(<span class="ruby-identifier">hash</span>)
  <span class="ruby-identifier">passed_in_options</span> = <span class="ruby-constant">IndifferentHash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">hash</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">raw_source</span> = <span class="ruby-string">''</span>

  <span class="ruby-ivar">@header</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Header</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@body</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Body</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@body_raw</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-comment"># We need to store the body until last, as we need all headers added first</span>
  <span class="ruby-identifier">body_content</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-identifier">passed_in_options</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">k</span> = <span class="ruby-identifier">underscoreize</span>(<span class="ruby-identifier">k</span>).<span class="ruby-identifier">to_sym</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">String</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-value">:headers</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">headers</span>(<span class="ruby-identifier">v</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-value">:body</span>
      <span class="ruby-identifier">body_content</span> = <span class="ruby-identifier">v</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">self</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">body_content</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">body_content</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">has_content_transfer_encoding?</span>
        <span class="ruby-identifier">body</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">content_transfer_encoding</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-init_with_string" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init_with_string</span><span
            class="method-args">(string)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="init_with_string-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_with_string</span>(<span class="ruby-identifier">string</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">raw_source</span> = <span class="ruby-identifier">string</span>
  <span class="ruby-identifier">set_envelope_header</span>
  <span class="ruby-identifier">parse_message</span>
  <span class="ruby-ivar">@separate_parts</span> = <span class="ruby-identifier">multipart?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-parse_message" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_message</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <pre>2.1. General Description
 A message consists of header fields (collectively called &quot;the header
 of the message&quot;) followed, optionally, by a body.  The header is a
 sequence of lines of characters with special syntax as defined in
 this standard. The body is simply a sequence of characters that
 follows the header and is separated from the header by an empty line
 (i.e., a line with nothing preceding the CRLF).</pre>

<p>Additionally, I allow for the case where someone might have put whitespace
on the “gap line”</p>
          
          

          
          <div class="method-source-code" id="parse_message-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1975</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_message</span>
  <span class="ruby-identifier">header_part</span>, <span class="ruby-identifier">body_part</span> = <span class="ruby-identifier">raw_source</span>.<span class="ruby-identifier">lstrip</span>.<span class="ruby-identifier">split</span>(<span class="ruby-node">/#{CRLF}#{CRLF}|#{CRLF}#{WSP}*#{CRLF}(?!#{WSP})/m</span>, <span class="ruby-value">2</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">header</span> = <span class="ruby-identifier">header_part</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span>   = <span class="ruby-identifier">body_part</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-process_body_raw" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">process_body_raw</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="process_body_raw-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2005</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">process_body_raw</span>
  <span class="ruby-ivar">@body</span> = <span class="ruby-constant">Mail</span><span class="ruby-operator">::</span><span class="ruby-constant">Body</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@body_raw</span>)
  <span class="ruby-ivar">@body_raw</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">separate_parts</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@separate_parts</span>

  <span class="ruby-identifier">add_encoding_to_body</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-raw_source-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">raw_source=</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="raw_source-3D-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 1981</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">raw_source=</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@raw_source</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_crlf</span>
  <span class="ruby-ivar">@raw_source</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-string">&quot;binary&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-string">&quot;1.9.1&quot;</span>
  <span class="ruby-ivar">@raw_source</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-separate_parts" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">separate_parts</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="separate_parts-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2021</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">separate_parts</span>
  <span class="ruby-identifier">body</span>.<span class="ruby-identifier">split!</span>(<span class="ruby-identifier">boundary</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-set_envelope_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_envelope_header</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="set_envelope_header-source">
            <pre><span class="ruby-comment"># File lib/mail/message.rb, line 2013</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_envelope_header</span>
  <span class="ruby-identifier">raw_string</span> = <span class="ruby-identifier">raw_source</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">match_data</span> = <span class="ruby-identifier">raw_source</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">match</span>(<span class="ruby-node">/\AFrom\s(#{TEXT}+)#{CRLF}/m</span>)
    <span class="ruby-identifier">set_envelope</span>(<span class="ruby-identifier">match_data</span>[<span class="ruby-value">1</span>])
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">raw_source</span> = <span class="ruby-identifier">raw_string</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-identifier">match_data</span>[<span class="ruby-value">0</span>], <span class="ruby-string">&quot;&quot;</span>) 
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

